<!DOCTYPE html>
<html lang="zh-CN"
  x-data
  :class="$store.darkMode.class()"
  :data-theme="$store.darkMode.theme()">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flutter æ¸¸æˆå¼€å‘(flame) 04 åˆ†æ•°, å­˜æ¡£å’ŒéŸ³æ•ˆ(4/5) | é˜¿èˆªçš„æŠ€æœ¯å°ç«™</title>

    

<link rel="canonical" href="http://localhost:1313/posts/post/2020/flutter-%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91flame-04/" />



<meta name="author" content="" />
<meta name="description" content="å¼•è¨€ åˆ†æ•°å’Œé«˜åˆ†è®°å½•æ˜¯ä»»ä½•æ¸¸æˆä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†. æœ‰äº›æ¸¸æˆæ ¹æ®æ”¶é›†çš„é‡‘å¸æ•°é‡è®¡ç®—å¾—åˆ†, æœ‰äº›åŸºäºæ€æ•Œæ•°, æœ‰äº›åˆ™åŸºäºå­˜æ´»æ—¶é—´.
åŒæ ·ä¸èƒ½å¿½è§†éŸ³æ•ˆå’ŒBGM(èƒŒæ™¯éŸ³ä¹). åŠ ä¸Šå®ƒä»¬, æ¸¸æˆå°†ä¼šèœ•å˜ğŸ¦‹.
å¦‚æœä¸€ä¸ªæ¸¸æˆæ— å£°, å®ƒå°±æ˜¯ä¸å®Œæ•´çš„.
æ¬¢è¿æ¥åˆ°Flutter&#43;Flameç³»åˆ—çš„ç¬¬å››ç« . å¦‚æœä½ è¿˜æ²¡æœ‰è¯»è¿‡ä¹‹å‰çš„ç« èŠ‚, å»ºè®®ä½ å…ˆé˜…è¯»ä¸€ä¸‹å“¦!ğŸ¤­
ğŸ”´ æ³¨æ„: æœ¬æ•™ç¨‹çš„èƒŒæ™¯éŸ³ä¹æœ‰äº›è¿‡æ—¶. ä½ å¯ä»¥å…ˆå­¦æœ¬ç« æ•™ç¨‹, ä¹‹åå†æ›¿æ¢ä¸ºè¿™ç¯‡æ•™ç¨‹ ä¸‹é¢æ˜¯æˆ‘ä»¬æœ¬ç³»åˆ—æ•™ç¨‹çš„æ–‡ç« ç›®å½•:
Flutter æ¸¸æˆå¼€å‘(flame) Flameä»‹ç» Flutter æ¸¸æˆå¼€å‘(flame) 01 å¼€å‘2Dä¼‘é—²æ¸¸æˆï¼šæ¶ˆç­å°é£è‡(1/5) Flutter æ¸¸æˆå¼€å‘(flame) 02 å›¾å½¢å’ŒåŠ¨ç”»(2/5) Flutter æ¸¸æˆå¼€å‘(flame) 03 ç•Œé¢å’Œå¼¹çª—(3/5) Flutter æ¸¸æˆå¼€å‘(flame) 04 åˆ†æ•°, å­˜æ¡£å’ŒéŸ³æ•ˆ(4/5) æœ¬ç«  Flutter æ¸¸æˆå¼€å‘(flame) 05 æ”¶å°¾å’Œæ‰“åŒ…(5/5) éœ€å…·å¤‡çš„æ¡ä»¶ æœ¬ç³»åˆ—æ•™ç¨‹ä¹‹å‰çš„å…¨éƒ¨è¦æ±‚ğŸ‘ˆ æ›´å¤šçš„èµ„æºåŒ…Â â€“ æœ¬æ•™ç¨‹æä¾›äº†èµ„æºåŒ…, ä½†ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå·±çš„. æ¨èèµ„æºç½‘ç«™Open Game Art . éŸ³æ•ˆå’ŒéŸ³ä¹èµ„æº - è¿™äº›ä¹Ÿå¯ä»¥åœ¨æ¸¸æˆèµ„æºç½‘ç«™ä¸Šæ‰¾åˆ°, æ¯”å¦‚Open Game Art . è¿˜æœ‰ä¸“é—¨çš„éŸ³é¢‘èµ„æºæ¯”å¦‚BenSound.com . åŒæ ·, ä½ å¿…é¡»æŸ¥çœ‹è®¸å¯å¹¶åœ¨æ¸¸æˆä¸­è¡¨ç¤ºæ„Ÿè°¢. æˆ‘ä»¬å°†ä½¿ç”¨ä¸å‰ä¸€éƒ¨åˆ†ç›¸åŒçš„ç¼–ç è§„èŒƒğŸ‘©â€ğŸ«
ğŸ‘‰åœ¨Github æˆ–ç äº‘ ä¸ŠæŸ¥çœ‹æœ¬ç« å…¨éƒ¨ä»£ç 
æ–°çš„èµ„æºåŒ… è¿™ä¸€éƒ¨åˆ†ä¸­, æˆ‘ä»¬éœ€è¦å¦ä¸€ä¸ªèµ„æºåŒ…, åŒ…å«é¢å¤–çš„å›¾å½¢ã€èƒŒæ™¯éŸ³ä¹å’Œä¸€äº›éŸ³æ•ˆ.
" />


<meta name="keywords" content="Flame,Flutter,æ¸¸æˆå¼€å‘">



<meta name="generator" content="Hugo 0.145.0">


<meta property="og:url" content="http://localhost:1313/posts/post/2020/flutter-%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91flame-04/">
  <meta property="og:site_name" content="é˜¿èˆªçš„æŠ€æœ¯å°ç«™">
  <meta property="og:title" content="Flutter æ¸¸æˆå¼€å‘(flame) 04 åˆ†æ•°, å­˜æ¡£å’ŒéŸ³æ•ˆ(4/5)">
  <meta property="og:description" content="å¼•è¨€ åˆ†æ•°å’Œé«˜åˆ†è®°å½•æ˜¯ä»»ä½•æ¸¸æˆä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†. æœ‰äº›æ¸¸æˆæ ¹æ®æ”¶é›†çš„é‡‘å¸æ•°é‡è®¡ç®—å¾—åˆ†, æœ‰äº›åŸºäºæ€æ•Œæ•°, æœ‰äº›åˆ™åŸºäºå­˜æ´»æ—¶é—´.
åŒæ ·ä¸èƒ½å¿½è§†éŸ³æ•ˆå’ŒBGM(èƒŒæ™¯éŸ³ä¹). åŠ ä¸Šå®ƒä»¬, æ¸¸æˆå°†ä¼šèœ•å˜ğŸ¦‹.
å¦‚æœä¸€ä¸ªæ¸¸æˆæ— å£°, å®ƒå°±æ˜¯ä¸å®Œæ•´çš„.
æ¬¢è¿æ¥åˆ°Flutter&#43;Flameç³»åˆ—çš„ç¬¬å››ç« . å¦‚æœä½ è¿˜æ²¡æœ‰è¯»è¿‡ä¹‹å‰çš„ç« èŠ‚, å»ºè®®ä½ å…ˆé˜…è¯»ä¸€ä¸‹å“¦!ğŸ¤­
ğŸ”´ æ³¨æ„: æœ¬æ•™ç¨‹çš„èƒŒæ™¯éŸ³ä¹æœ‰äº›è¿‡æ—¶. ä½ å¯ä»¥å…ˆå­¦æœ¬ç« æ•™ç¨‹, ä¹‹åå†æ›¿æ¢ä¸ºè¿™ç¯‡æ•™ç¨‹ ä¸‹é¢æ˜¯æˆ‘ä»¬æœ¬ç³»åˆ—æ•™ç¨‹çš„æ–‡ç« ç›®å½•:
Flutter æ¸¸æˆå¼€å‘(flame) Flameä»‹ç» Flutter æ¸¸æˆå¼€å‘(flame) 01 å¼€å‘2Dä¼‘é—²æ¸¸æˆï¼šæ¶ˆç­å°é£è‡(1/5) Flutter æ¸¸æˆå¼€å‘(flame) 02 å›¾å½¢å’ŒåŠ¨ç”»(2/5) Flutter æ¸¸æˆå¼€å‘(flame) 03 ç•Œé¢å’Œå¼¹çª—(3/5) Flutter æ¸¸æˆå¼€å‘(flame) 04 åˆ†æ•°, å­˜æ¡£å’ŒéŸ³æ•ˆ(4/5) æœ¬ç«  Flutter æ¸¸æˆå¼€å‘(flame) 05 æ”¶å°¾å’Œæ‰“åŒ…(5/5) éœ€å…·å¤‡çš„æ¡ä»¶ æœ¬ç³»åˆ—æ•™ç¨‹ä¹‹å‰çš„å…¨éƒ¨è¦æ±‚ğŸ‘ˆ æ›´å¤šçš„èµ„æºåŒ…Â â€“ æœ¬æ•™ç¨‹æä¾›äº†èµ„æºåŒ…, ä½†ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå·±çš„. æ¨èèµ„æºç½‘ç«™Open Game Art . éŸ³æ•ˆå’ŒéŸ³ä¹èµ„æº - è¿™äº›ä¹Ÿå¯ä»¥åœ¨æ¸¸æˆèµ„æºç½‘ç«™ä¸Šæ‰¾åˆ°, æ¯”å¦‚Open Game Art . è¿˜æœ‰ä¸“é—¨çš„éŸ³é¢‘èµ„æºæ¯”å¦‚BenSound.com . åŒæ ·, ä½ å¿…é¡»æŸ¥çœ‹è®¸å¯å¹¶åœ¨æ¸¸æˆä¸­è¡¨ç¤ºæ„Ÿè°¢. æˆ‘ä»¬å°†ä½¿ç”¨ä¸å‰ä¸€éƒ¨åˆ†ç›¸åŒçš„ç¼–ç è§„èŒƒğŸ‘©â€ğŸ«
ğŸ‘‰åœ¨Github æˆ–ç äº‘ ä¸ŠæŸ¥çœ‹æœ¬ç« å…¨éƒ¨ä»£ç 
æ–°çš„èµ„æºåŒ… è¿™ä¸€éƒ¨åˆ†ä¸­, æˆ‘ä»¬éœ€è¦å¦ä¸€ä¸ªèµ„æºåŒ…, åŒ…å«é¢å¤–çš„å›¾å½¢ã€èƒŒæ™¯éŸ³ä¹å’Œä¸€äº›éŸ³æ•ˆ.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2020-04-17T00:00:00+00:00">
    <meta property="article:modified_time" content="2020-04-17T00:00:00+00:00">
    <meta property="article:tag" content="Flame">
    <meta property="article:tag" content="Flutter">
    <meta property="article:tag" content="æ¸¸æˆå¼€å‘">




  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Flutter æ¸¸æˆå¼€å‘(flame) 04 åˆ†æ•°, å­˜æ¡£å’ŒéŸ³æ•ˆ(4/5)">
  <meta name="twitter:description" content="å¼•è¨€ åˆ†æ•°å’Œé«˜åˆ†è®°å½•æ˜¯ä»»ä½•æ¸¸æˆä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†. æœ‰äº›æ¸¸æˆæ ¹æ®æ”¶é›†çš„é‡‘å¸æ•°é‡è®¡ç®—å¾—åˆ†, æœ‰äº›åŸºäºæ€æ•Œæ•°, æœ‰äº›åˆ™åŸºäºå­˜æ´»æ—¶é—´.
åŒæ ·ä¸èƒ½å¿½è§†éŸ³æ•ˆå’ŒBGM(èƒŒæ™¯éŸ³ä¹). åŠ ä¸Šå®ƒä»¬, æ¸¸æˆå°†ä¼šèœ•å˜ğŸ¦‹.
å¦‚æœä¸€ä¸ªæ¸¸æˆæ— å£°, å®ƒå°±æ˜¯ä¸å®Œæ•´çš„.
æ¬¢è¿æ¥åˆ°Flutter&#43;Flameç³»åˆ—çš„ç¬¬å››ç« . å¦‚æœä½ è¿˜æ²¡æœ‰è¯»è¿‡ä¹‹å‰çš„ç« èŠ‚, å»ºè®®ä½ å…ˆé˜…è¯»ä¸€ä¸‹å“¦!ğŸ¤­
ğŸ”´ æ³¨æ„: æœ¬æ•™ç¨‹çš„èƒŒæ™¯éŸ³ä¹æœ‰äº›è¿‡æ—¶. ä½ å¯ä»¥å…ˆå­¦æœ¬ç« æ•™ç¨‹, ä¹‹åå†æ›¿æ¢ä¸ºè¿™ç¯‡æ•™ç¨‹ ä¸‹é¢æ˜¯æˆ‘ä»¬æœ¬ç³»åˆ—æ•™ç¨‹çš„æ–‡ç« ç›®å½•:
Flutter æ¸¸æˆå¼€å‘(flame) Flameä»‹ç» Flutter æ¸¸æˆå¼€å‘(flame) 01 å¼€å‘2Dä¼‘é—²æ¸¸æˆï¼šæ¶ˆç­å°é£è‡(1/5) Flutter æ¸¸æˆå¼€å‘(flame) 02 å›¾å½¢å’ŒåŠ¨ç”»(2/5) Flutter æ¸¸æˆå¼€å‘(flame) 03 ç•Œé¢å’Œå¼¹çª—(3/5) Flutter æ¸¸æˆå¼€å‘(flame) 04 åˆ†æ•°, å­˜æ¡£å’ŒéŸ³æ•ˆ(4/5) æœ¬ç«  Flutter æ¸¸æˆå¼€å‘(flame) 05 æ”¶å°¾å’Œæ‰“åŒ…(5/5) éœ€å…·å¤‡çš„æ¡ä»¶ æœ¬ç³»åˆ—æ•™ç¨‹ä¹‹å‰çš„å…¨éƒ¨è¦æ±‚ğŸ‘ˆ æ›´å¤šçš„èµ„æºåŒ…Â â€“ æœ¬æ•™ç¨‹æä¾›äº†èµ„æºåŒ…, ä½†ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå·±çš„. æ¨èèµ„æºç½‘ç«™Open Game Art . éŸ³æ•ˆå’ŒéŸ³ä¹èµ„æº - è¿™äº›ä¹Ÿå¯ä»¥åœ¨æ¸¸æˆèµ„æºç½‘ç«™ä¸Šæ‰¾åˆ°, æ¯”å¦‚Open Game Art . è¿˜æœ‰ä¸“é—¨çš„éŸ³é¢‘èµ„æºæ¯”å¦‚BenSound.com . åŒæ ·, ä½ å¿…é¡»æŸ¥çœ‹è®¸å¯å¹¶åœ¨æ¸¸æˆä¸­è¡¨ç¤ºæ„Ÿè°¢. æˆ‘ä»¬å°†ä½¿ç”¨ä¸å‰ä¸€éƒ¨åˆ†ç›¸åŒçš„ç¼–ç è§„èŒƒğŸ‘©â€ğŸ«
ğŸ‘‰åœ¨Github æˆ–ç äº‘ ä¸ŠæŸ¥çœ‹æœ¬ç« å…¨éƒ¨ä»£ç 
æ–°çš„èµ„æºåŒ… è¿™ä¸€éƒ¨åˆ†ä¸­, æˆ‘ä»¬éœ€è¦å¦ä¸€ä¸ªèµ„æºåŒ…, åŒ…å«é¢å¤–çš„å›¾å½¢ã€èƒŒæ™¯éŸ³ä¹å’Œä¸€äº›éŸ³æ•ˆ.">




<link rel="stylesheet" href="/css/output.css" />




    


<style>
  pre {
    padding: 1em;
    overflow: auto;
  }
</style>









    

    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  </head>

  <body x-data="{
    flip: false,
  }">
    
    <div id="dream-global-bg"></div>

    
<nav class="mt-4 lg:mt-8 py-4">

  
  <div class="container flex justify-between px-4">
  
    <section class="flex items-center gap-4">
      <div class="avatar cursor-pointer hover:online" @click="flip = !flip" title="Flip it!">
        <div class="h-10 rounded-full">
          <img src="/" alt="" />
        </div>
      </div>

      
    </section>

    <div class="dropdown dropdown-end sm:hidden">
      <div tabindex="0" role="button" class="btn btn-ghost btn-square" aria-label="Select an option">
        <ion-icon name="menu" class="text-2xl"></ion-icon>
      </div>
      <ul tabindex="0" class="dropdown-content menu w-36 bg-base-100 rounded-box z-[1] shadow-md">
        

















<li>
  <a class="inline-flex items-center p-2 cursor-pointer" href="/posts" title="Archives">
    <ion-icon name="archive"></ion-icon>
    Archives
  </a>
</li>




<li>
  <a class="inline-flex items-center p-2 cursor-pointer" href="/categories" title="All Categories">
    <ion-icon name="grid"></ion-icon>
    All Categories
  </a>
</li>




<li>
  <a class="inline-flex items-center p-2 cursor-pointer" href="/tags" title="All Tags">
    <ion-icon name="pricetags"></ion-icon>
    All Tags
  </a>
</li>






      </ul>
    </div>
    <section class="hidden sm:flex sm:items-center sm:gap-2 md:gap-4">
      
      

      

      
      





      
      





      
      





      
      
<a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="/posts" title="Archives">
  <ion-icon class="group-hover:text-primary-content" name="archive"></ion-icon>
</a>


      
      
<a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="/categories" title="All Categories">
  <ion-icon class="group-hover:text-primary-content" name="grid"></ion-icon>
</a>


      
      
<a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="/tags" title="All Tags">
  <ion-icon class="group-hover:text-primary-content" name="pricetags"></ion-icon>
</a>


      

      

      
    </section>
  </div>
</nav>


    <div class="flip-container" :class="{ 'flip-it': flip }">
      <div class="flipper">
        <div class="front">
          <div class="container">
            
<div class="lg:grid lg:grid-cols-4 gap-4 mt-4 px-4">
  <div class="hidden lg:block">
    
  </div>

  <div class="lg:col-span-2">
    <article class="mx-auto prose prose-quoteless dark:prose-invert" id="dream-single-post-main" itemscope itemtype="http://schema.org/Article">
      
  <meta itemprop="name" content="Flutter æ¸¸æˆå¼€å‘(flame) 04 åˆ†æ•°, å­˜æ¡£å’ŒéŸ³æ•ˆ(4/5)">
  <meta itemprop="description" content="å¼•è¨€ åˆ†æ•°å’Œé«˜åˆ†è®°å½•æ˜¯ä»»ä½•æ¸¸æˆä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†. æœ‰äº›æ¸¸æˆæ ¹æ®æ”¶é›†çš„é‡‘å¸æ•°é‡è®¡ç®—å¾—åˆ†, æœ‰äº›åŸºäºæ€æ•Œæ•°, æœ‰äº›åˆ™åŸºäºå­˜æ´»æ—¶é—´.
åŒæ ·ä¸èƒ½å¿½è§†éŸ³æ•ˆå’ŒBGM(èƒŒæ™¯éŸ³ä¹). åŠ ä¸Šå®ƒä»¬, æ¸¸æˆå°†ä¼šèœ•å˜ğŸ¦‹.
å¦‚æœä¸€ä¸ªæ¸¸æˆæ— å£°, å®ƒå°±æ˜¯ä¸å®Œæ•´çš„.
æ¬¢è¿æ¥åˆ°Flutter&#43;Flameç³»åˆ—çš„ç¬¬å››ç« . å¦‚æœä½ è¿˜æ²¡æœ‰è¯»è¿‡ä¹‹å‰çš„ç« èŠ‚, å»ºè®®ä½ å…ˆé˜…è¯»ä¸€ä¸‹å“¦!ğŸ¤­
ğŸ”´ æ³¨æ„: æœ¬æ•™ç¨‹çš„èƒŒæ™¯éŸ³ä¹æœ‰äº›è¿‡æ—¶. ä½ å¯ä»¥å…ˆå­¦æœ¬ç« æ•™ç¨‹, ä¹‹åå†æ›¿æ¢ä¸ºè¿™ç¯‡æ•™ç¨‹ ä¸‹é¢æ˜¯æˆ‘ä»¬æœ¬ç³»åˆ—æ•™ç¨‹çš„æ–‡ç« ç›®å½•:
Flutter æ¸¸æˆå¼€å‘(flame) Flameä»‹ç» Flutter æ¸¸æˆå¼€å‘(flame) 01 å¼€å‘2Dä¼‘é—²æ¸¸æˆï¼šæ¶ˆç­å°é£è‡(1/5) Flutter æ¸¸æˆå¼€å‘(flame) 02 å›¾å½¢å’ŒåŠ¨ç”»(2/5) Flutter æ¸¸æˆå¼€å‘(flame) 03 ç•Œé¢å’Œå¼¹çª—(3/5) Flutter æ¸¸æˆå¼€å‘(flame) 04 åˆ†æ•°, å­˜æ¡£å’ŒéŸ³æ•ˆ(4/5) æœ¬ç«  Flutter æ¸¸æˆå¼€å‘(flame) 05 æ”¶å°¾å’Œæ‰“åŒ…(5/5) éœ€å…·å¤‡çš„æ¡ä»¶ æœ¬ç³»åˆ—æ•™ç¨‹ä¹‹å‰çš„å…¨éƒ¨è¦æ±‚ğŸ‘ˆ æ›´å¤šçš„èµ„æºåŒ…Â â€“ æœ¬æ•™ç¨‹æä¾›äº†èµ„æºåŒ…, ä½†ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå·±çš„. æ¨èèµ„æºç½‘ç«™Open Game Art . éŸ³æ•ˆå’ŒéŸ³ä¹èµ„æº - è¿™äº›ä¹Ÿå¯ä»¥åœ¨æ¸¸æˆèµ„æºç½‘ç«™ä¸Šæ‰¾åˆ°, æ¯”å¦‚Open Game Art . è¿˜æœ‰ä¸“é—¨çš„éŸ³é¢‘èµ„æºæ¯”å¦‚BenSound.com . åŒæ ·, ä½ å¿…é¡»æŸ¥çœ‹è®¸å¯å¹¶åœ¨æ¸¸æˆä¸­è¡¨ç¤ºæ„Ÿè°¢. æˆ‘ä»¬å°†ä½¿ç”¨ä¸å‰ä¸€éƒ¨åˆ†ç›¸åŒçš„ç¼–ç è§„èŒƒğŸ‘©â€ğŸ«
ğŸ‘‰åœ¨Github æˆ–ç äº‘ ä¸ŠæŸ¥çœ‹æœ¬ç« å…¨éƒ¨ä»£ç 
æ–°çš„èµ„æºåŒ… è¿™ä¸€éƒ¨åˆ†ä¸­, æˆ‘ä»¬éœ€è¦å¦ä¸€ä¸ªèµ„æºåŒ…, åŒ…å«é¢å¤–çš„å›¾å½¢ã€èƒŒæ™¯éŸ³ä¹å’Œä¸€äº›éŸ³æ•ˆ.">
  <meta itemprop="datePublished" content="2020-04-17T00:00:00+00:00">
  <meta itemprop="dateModified" content="2020-04-17T00:00:00+00:00">
  <meta itemprop="wordCount" content="2213">
  <meta itemprop="keywords" content="Flame,Flutter,æ¸¸æˆå¼€å‘">

      <header>
        <h1 itemprop="headline">Flutter æ¸¸æˆå¼€å‘(flame) 04 åˆ†æ•°, å­˜æ¡£å’ŒéŸ³æ•ˆ(4/5)</h1>
        <p class="text-sm">
          
            Friday, Apr 17, 2020
          

          | <span>11 minute read</span>

          
          | <span>Updated at
            
              Friday, Apr 17, 2020
            </span>
          
        </p>

        
        <div class="flex justify-between">
          

          <div class="flex items-center gap-2">
  
  

  
  
  
  
  
    <a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary"
      href="https://x.com/intent/post?text=Flutter%20%e6%b8%b8%e6%88%8f%e5%bc%80%e5%8f%91%28flame%29%2004%20%e5%88%86%e6%95%b0,%20%e5%ad%98%e6%a1%a3%e5%92%8c%e9%9f%b3%e6%95%88%284/5%29&amp;url=http://localhost:1313/posts/post/2020/flutter-%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91flame-04/" target="_blank" rel="noopener noreferrer"
      title="Share on X">
      <ion-icon class="group-hover:text-primary-content" name="logo-x"></ion-icon>
    </a>
  
    <a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary"
      href="https://facebook.com/sharer/sharer.php?u=http://localhost:1313/posts/post/2020/flutter-%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91flame-04/" target="_blank" rel="noopener noreferrer"
      title="Share on Facebook">
      <ion-icon class="group-hover:text-primary-content" name="logo-facebook"></ion-icon>
    </a>
  
    <a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary"
      href="https://wa.me/?text=Flutter%20%e6%b8%b8%e6%88%8f%e5%bc%80%e5%8f%91%28flame%29%2004%20%e5%88%86%e6%95%b0,%20%e5%ad%98%e6%a1%a3%e5%92%8c%e9%9f%b3%e6%95%88%284/5%29%20http://localhost:1313/posts/post/2020/flutter-%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91flame-04/" target="_blank" rel="noopener noreferrer"
      title="Share on WhatsApp">
      <ion-icon class="group-hover:text-primary-content" name="logo-whatsapp"></ion-icon>
    </a>
  

  
  
</div>

        </div>
      </header>

      <section id="dream-single-post-content" itemprop="articleBody">
        

        <h2 id="å¼•è¨€">å¼•è¨€</h2>
<p><strong>åˆ†æ•°</strong>å’Œ<strong>é«˜åˆ†è®°å½•</strong>æ˜¯ä»»ä½•æ¸¸æˆä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†. æœ‰äº›æ¸¸æˆæ ¹æ®æ”¶é›†çš„é‡‘å¸æ•°é‡è®¡ç®—å¾—åˆ†, æœ‰äº›åŸºäºæ€æ•Œæ•°, æœ‰äº›åˆ™åŸºäºå­˜æ´»æ—¶é—´.</p>
<p>åŒæ ·ä¸èƒ½å¿½è§†<strong>éŸ³æ•ˆ</strong>å’Œ<strong>BGM</strong>(èƒŒæ™¯éŸ³ä¹). åŠ ä¸Šå®ƒä»¬, æ¸¸æˆå°†ä¼šèœ•å˜ğŸ¦‹.</p>
<p>å¦‚æœä¸€ä¸ªæ¸¸æˆæ— å£°, å®ƒå°±æ˜¯ä¸å®Œæ•´çš„.</p>
<p>æ¬¢è¿æ¥åˆ°Flutter+Flameç³»åˆ—çš„ç¬¬å››ç« . å¦‚æœä½ è¿˜æ²¡æœ‰è¯»è¿‡ä¹‹å‰çš„ç« èŠ‚, å»ºè®®ä½ å…ˆé˜…è¯»ä¸€ä¸‹å“¦!ğŸ¤­</p>
<p>ğŸ”´ æ³¨æ„: æœ¬æ•™ç¨‹çš„èƒŒæ™¯éŸ³ä¹æœ‰äº›è¿‡æ—¶. ä½ å¯ä»¥å…ˆå­¦æœ¬ç« æ•™ç¨‹, ä¹‹åå†æ›¿æ¢ä¸º<a href="https://jap.alekhin.io/background-music-in-a-flame-game" target="_blank">è¿™ç¯‡æ•™ç¨‹</a>
</p>
<p>ä¸‹é¢æ˜¯æˆ‘ä»¬æœ¬ç³»åˆ—æ•™ç¨‹çš„æ–‡ç« ç›®å½•:</p>
<ul>
<li><a href="https://www.bugcatt.com/archives/279" target="_blank">Flutter æ¸¸æˆå¼€å‘(flame) Flameä»‹ç»</a>
</li>
<li><a href="https://www.bugcatt.com/archives/292" target="_blank">Flutter æ¸¸æˆå¼€å‘(flame) 01 å¼€å‘2Dä¼‘é—²æ¸¸æˆï¼šæ¶ˆç­å°é£è‡(1/5)</a>
</li>
<li><a href="https://www.bugcatt.com/archives/560" target="_blank">Flutter æ¸¸æˆå¼€å‘(flame) 02 å›¾å½¢å’ŒåŠ¨ç”»(2/5)</a>
</li>
<li><a href="https://www.bugcatt.com/archives/562" target="_blank">Flutter æ¸¸æˆå¼€å‘(flame) 03 ç•Œé¢å’Œå¼¹çª—(3/5)</a>
</li>
<li><strong>Flutter æ¸¸æˆå¼€å‘(flame) 04 åˆ†æ•°, å­˜æ¡£å’ŒéŸ³æ•ˆ(4/5) æœ¬ç« </strong></li>
<li><a href="https://www.bugcatt.com/archives/731" target="_blank">Flutter æ¸¸æˆå¼€å‘(flame) 05 æ”¶å°¾å’Œæ‰“åŒ…(5/5)</a>
</li>
</ul>
<h2 id="éœ€å…·å¤‡çš„æ¡ä»¶">éœ€å…·å¤‡çš„æ¡ä»¶</h2>
<ol>
<li>æœ¬ç³»åˆ—æ•™ç¨‹ä¹‹å‰çš„<strong>å…¨éƒ¨è¦æ±‚</strong>ğŸ‘ˆ</li>
<li><strong>æ›´å¤šçš„èµ„æºåŒ…</strong>Â â€“ æœ¬æ•™ç¨‹æä¾›äº†èµ„æºåŒ…, ä½†ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå·±çš„. æ¨èèµ„æºç½‘ç«™<a href="https://opengameart.org/" target="_blank">Open Game Art</a>
.</li>
<li><strong>éŸ³æ•ˆå’ŒéŸ³ä¹èµ„æº</strong> - è¿™äº›ä¹Ÿå¯ä»¥åœ¨æ¸¸æˆèµ„æºç½‘ç«™ä¸Šæ‰¾åˆ°, æ¯”å¦‚<a href="https://opengameart.org/" target="_blank">Open Game Art</a>
. è¿˜æœ‰ä¸“é—¨çš„éŸ³é¢‘èµ„æºæ¯”å¦‚<a href="https://www.bensound.com/" target="_blank">BenSound.com</a>
. åŒæ ·, ä½ å¿…é¡»æŸ¥çœ‹è®¸å¯å¹¶åœ¨æ¸¸æˆä¸­è¡¨ç¤ºæ„Ÿè°¢.</li>
</ol>
<p>æˆ‘ä»¬å°†ä½¿ç”¨ä¸å‰ä¸€éƒ¨åˆ†ç›¸åŒçš„<strong>ç¼–ç è§„èŒƒ</strong>ğŸ‘©â€ğŸ«</p>
<p><strong>ğŸ‘‰åœ¨<a href="https://github.com/HarrisonQi/flame-tutorial-langaw/tree/e72da435c3100a1601e16e75efc62fbaea6b3fe6" target="_blank">Github</a>
æˆ–<a href="https://github.com/HarrisonQi/flame-tutorial-langaw/tree/e72da435c3100a1601e16e75efc62fbaea6b3fe6" target="_blank">ç äº‘</a>
ä¸ŠæŸ¥çœ‹æœ¬ç« å…¨éƒ¨ä»£ç </strong></p>
<h2 id="æ–°çš„èµ„æºåŒ…">æ–°çš„èµ„æºåŒ…</h2>
<p>è¿™ä¸€éƒ¨åˆ†ä¸­, æˆ‘ä»¬éœ€è¦å¦ä¸€ä¸ªèµ„æºåŒ…, åŒ…å«é¢å¤–çš„å›¾å½¢ã€èƒŒæ™¯éŸ³ä¹å’Œä¸€äº›éŸ³æ•ˆ.</p>
<p><a href="https://jap.alekhin.io/wp-content/uploads/2019/04/resource-pack-part-4.zip" target="_blank"><img src="images/01.jpg" alt="ä¸‹è½½"></a>
</p>
<p><a href="https://jap.alekhin.io/wp-content/uploads/2019/04/resource-pack-part-4.zip" target="_blank">ç‚¹å‡»å›¾ç‰‡æˆ–æ­¤å¤„è¿›è¡Œä¸‹è½½</a>
</p>
<hr>
<p>[epcl_box type=&ldquo;error&rdquo;]<strong>æ³¨æ„</strong>: å¦‚æœä½ éµå¾ªæœ¬æ•™ç¨‹, åˆ™å¯ä»¥ä½¿ç”¨ä¸Šè¿°èµ„æºåŒ…. æœ¬èµ„æºåŒ…æ˜¯<a href="https://github.com/japalekhin/langaw" target="_blank">Githubä¸ŠLangaw(åŸä½œè€…)</a>
é¡¹ç›®çš„ä¸€éƒ¨åˆ†, è¯¥é¡¹ç›®è·å¾—<code>CC-BY-NC-ND</code>è®¸å¯è¯çš„è®¸å¯.[/epcl_box]</p>
<p>è¿™æ„å‘³ç€æ‚¨å¯ä»¥å…±äº«ã€å¤åˆ¶æˆ–è€…é‡æ–°åˆ†å‘èµ„æº.</p>
<ul>
<li>ä½ å¿…é¡»åœ¨æ„Ÿè°¢ä¸­æåˆ°, æä¾›è®¸å¯è¯çš„é“¾æ¥, å¹¶æ ‡æ˜ä½ æ˜¯å¦è¿›è¡Œäº†æ›´æ”¹.</li>
<li>ä½ ä¸å¾—å°†èµ„æºç”¨äºå•†ä¸šç›®çš„.</li>
<li>å¦‚æœæ··åˆ, è½¬æ¢æˆ–è€…æ„å»ºèµ„æº, åˆ™ä¸èƒ½åˆ†å‘ä¿®æ”¹åçš„èµ„æº.</li>
<li>ä½ ä¸å¾—åº”ç”¨æ³•å¾‹æ¡æ¬¾æˆ–æŠ€æœ¯æªæ–½, åœ¨æ³•å¾‹ä¸Šé™åˆ¶ä»–äººåšè®¸å¯è¯å…è®¸çš„ä»»ä½•äº‹æƒ….</li>
</ul>
<p><a href="https://creativecommons.org/licenses/by-nc-nd/2.0/legalcode" target="_blank">ç‚¹å‡»æ­¤å¤„äº†è§£æœ‰å…³ CC-BY-NC-ND è®¸å¯è¯çš„æ›´å¤šä¿¡æ¯</a>
</p>
<p>[epcl_box type=&ldquo;notice&rdquo;]é˜¿èˆªåœ¨è¿™é‡Œæé†’: ç›®å‰å›½å†…çš„ç‰ˆæƒä¿æŠ¤åšçš„ä¸å¤Ÿå¥½. å¸Œæœ›å¤§å®¶èƒ½å¤Ÿä¿æŠ¤èµ„æºåŸä½œè€…è¾›è‹¦çš„åˆ›ä½œğŸ™ğŸ™! ä¸èƒ½ä½¿ç”¨æœªç»è®¸å¯ä¸”æ— ç‰ˆæƒçš„èµ„æº, å‘ç›—ç‰ˆè¯´ä¸ğŸ‘‹![/epcl_box]</p>
<hr>
<h2 id="ç»§ç»­å¼€å‘">ç»§ç»­å¼€å‘</h2>
<p>åœ¨è¿™éƒ¨åˆ†ä¸­, æˆ‘ä»¬å°†ä¸“æ³¨äº<strong>åˆ†æ•°</strong>å’Œ<strong>éŸ³æ•ˆ</strong>.</p>
<p>æˆ‘ä»¬å°†ä½¿ç”¨å¦ä¸€ä¸ªFlutteråº“æ¥è®°å½•, ä¿å­˜ç©å®¶çš„æœ€é«˜åˆ†.</p>
<p>è‡³äºéŸ³æ•ˆ, æˆ‘ä»¬å°†ä½¿ç”¨Flameä¸­çš„éŸ³é¢‘åº“.</p>
<h3 id="ç¬¬ä¸€æ­¥-è¯„åˆ†">ç¬¬ä¸€æ­¥: è¯„åˆ†</h3>
<p>ç›®å‰ä¸ºæ­¢, æ¸¸æˆçš„ç›®æ ‡åªæ˜¯ä¸åœçš„å‡»æ€å°é£è‡, ç›´åˆ°ç©å®¶æ‰“å. é™¤æ­¤ä¹‹å¤–, æ²¡æœ‰ç›®æ ‡.</p>
<p>æˆ‘ä»¬æ¥æ·»åŠ ä¸€ä¸ªç›®æ ‡. åœ¨ç©å®¶å‡»ä¸­å°é£è‡æ—¶å¾—ä¸€åˆ†, å¹¶ç´¯è®¡åˆ°å½“å‰åˆ†æ•°ä¸­. ä¸å…¶ä»–çš„æ¸¸æˆä¸€æ ·, åˆ†æ•°å°†ä»é›¶å¼€å§‹, å¹¶åœ¨æ–°æ¸¸æˆæ—¶é‡ç½®.</p>
<h4 id="æ–°å»ºç”¨äºè®°å½•åˆ†æ•°çš„å®ä¾‹å˜é‡">æ–°å»ºç”¨äºè®°å½•åˆ†æ•°çš„å®ä¾‹å˜é‡</h4>
<p>é¦–å…ˆæ¥åˆ°<code>./lib/langaw-game.dart</code>, æ·»åŠ å®ä¾‹å˜é‡:</p>
<pre tabindex="0"><code>int score;
</code></pre><p><strong>å°æç¤º</strong>: åªéœ€è¦æ·»åŠ åˆ°å…¶ä»–å®ä¾‹å˜é‡çš„ä¸‹æ–¹.</p>
<p>åœ¨<code>initialize()</code>ä¸­, åˆå§‹åŒ–<code>score</code>çš„å€¼:</p>
<pre tabindex="0"><code>score = 0;
</code></pre><p>æˆ‘ä»¬éœ€è¦ç©å®¶æ¯æ¬¡ç‚¹å‡»å¼€å§‹æ¸¸æˆæŒ‰é’®æ—¶, é‡ç½®æ­¤å€¼.</p>
<p>è·³è½¬è‡³<code>./lib/components/start-button.dart</code>, åœ¨<code>onTapDown</code>å¤„ç†å™¨ä¸­æ·»åŠ :</p>
<pre tabindex="0"><code>game.score = 0;
</code></pre><h4 id="æ˜¾ç¤ºåˆ†æ•°">æ˜¾ç¤ºåˆ†æ•°</h4>
<p>åˆ°ç›®å‰ä¸ºæ­¢è¿˜æ˜¯è›®é¡ºåˆ©çš„ğŸ˜! æ¥ä¸‹æ¥æˆ‘ä»¬æŠŠåˆ†æ•°æ˜¾ç¤ºå‡ºæ¥.</p>
<p>æˆ‘ä»¬å¯ä»¥é€‰æ‹©åœ¨gameç±»ä¸­è¿›è¡Œæ¸²æŸ“. ä½†æ˜¯ç”±äºå±•ç¤ºçš„ä¸œè¥¿æ¯”è¾ƒå°‘, æˆ‘ä»¬å°†è¯¥é€»è¾‘å°è£…åœ¨è‡ªå·±çš„component.</p>
<p>åˆ›å»ºä¸€ä¸ªç»„ä»¶<code>./lib/components/score-display.dart</code>:</p>
<pre tabindex="0"><code>import &#39;dart:ui&#39;;
import &#39;package:flutter/painting.dart&#39;;
import &#39;package:langaw/langaw-game.dart&#39;;

class ScoreDisplay {
  final LangawGame game;

  ScoreDisplay(this.game) {}

  void render(Canvas c) {}

  void update(double t) {}
}
</code></pre>


  <blockquote>
    <p>ğŸ’¡ ä»£ç è§£æ: ä»<code>import</code>å¼€å§‹, <code>dart:ui</code>ä½¿æˆ‘ä»¬å¯ä»¥è®¿é—®<code>Canvas</code>å’Œ<code>Offset</code>; <code>package:flutter/painting</code>ä½¿æˆ‘ä»¬å¯ä»¥è®¿é—®<code>TextPainter</code>; <code>package:langaw/langaw-game.dart</code>ä½¿æˆ‘ä»¬å¯ä»¥è®¿é—®gameç±».</p>
<p>ğŸŸ¡ æç¤º: æˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªåä¸º<code>game</code>çš„å®ä¾‹å˜é‡, åœ¨åˆ›å»ºæ­¤ç±»çš„å®ä¾‹æ—¶å¿…é¡»ä¼ å…¥æ­¤å˜é‡. ä¸æˆ‘ä»¬åœ¨ç­¾åçš„componentä¸­å®šä¹‰çš„å…¶ä»–componentã€controllerå’Œviewä¸€è‡´.</p>
  </blockquote>

<p>è®©æˆ‘ä»¬å†æ·»åŠ ä¸‰ä¸ªå®ä¾‹å˜é‡: <code>TextPainter</code>ç±»å‹çš„<code>painter</code>, ç”¨äºæ¸²æŸ“åˆ†æ•°å€¼; <code>textStyle</code>æ§åˆ¶åˆ†æ•°æ ·å¼; <code>position</code>å†³å®šåˆ†æ•°çš„<code>Offset</code>(åç§»é‡):</p>
<pre tabindex="0"><code>TextPainter painter;
TextStyle textStyle;
Offset position;
</code></pre><p>ç„¶åæˆ‘ä»¬æ¥å¤„ç†æ„é€ å‡½æ•°, åœ¨å…¶ä¸­åˆå§‹åŒ–å®ä¾‹å˜é‡å€¼:</p>
<pre tabindex="0"><code>ScoreDisplay(this.game) {
  painter = TextPainter(
    textAlign: TextAlign.center,
    textDirection: TextDirection.ltr,
  );

  textStyle = TextStyle(
    color: Color(0xffffffff),
    fontSize: 90,
    shadows: [
      Shadow(
        blurRadius: 7,
        color: Color(0xff000000),
        offset: Offset(3, 3),
      ),
    ],
  );

  position = Offset.zero;
}
</code></pre>


  <blockquote>
    <p>ğŸ’¡ ä»£ç è§£æ: é¦–å…ˆ, ä½¿ç”¨åˆ›å»ºä¸€ä¸ªæ–°çš„<code>TextPainter</code>ç”¨äºåˆå§‹åŒ–<code>painter</code>. å°†å…¶<code>textAlign</code>å±æ€§è®¾ç½®ä¸ºå±…ä¸­, å› ä¸ºæˆ‘ä»¬å°†åœ¨å±å¹•ä¸Šæ°´å¹³å±…ä¸­æ˜¾ç¤ºå¾—åˆ†. ç”±äºæ¸¸æˆæ˜¯è‹±æ–‡çš„(ä¹¦å†™æ–¹å‘ä¸ºä»å·¦è‡³å³), æˆ‘ä»¬å°†<code>textDirection</code>å±æ€§è®¾ç½®ä¸º<strong>LTR</strong>(Left-to-Right).</p>
<p>æ¥ä¸‹æ¥, ä½¿ç”¨<code>TextStyle</code>åˆå§‹åŒ–<code>textStyle</code>å±æ€§. è®¾ç½®ä¸‰ä¸ªå±æ€§:<code>color</code>è®¾ç½®ä¸º<code>Color(0xffffffff)</code>(çº¯ç™½è‰²); å­—ä½“å¤§å°ä¸º<code>90 é€»è¾‘åƒç´ </code>; å¹¶ä¸”å°†<code>shadows</code>å±æ€§è®¾ç½®ä¸ºåŒ…å«ä¸€é¡¹çš„ç±»å‹ä¸º<code>Shadow</code>çš„<code>List</code>. æ­¤é¡¹å®šä¹‰ä¸€ä¸ªé˜´å½±, è¯¥é˜´å½±åœ¨å³ä¾§å’Œåº•éƒ¨åç§»3ä¸ªé€»è¾‘åƒç´ . å¦‚æœåˆ†æ•°åœ¨å¦ä¸€ä¸ªç™½è‰²å¯¹è±¡çš„é¡¶éƒ¨æ¸²æŸ“(æ¯”å¦‚ç™½äº‘), é€šè¿‡é˜´å½±å¯ä»¥å¢åŠ å¯¹æ¯”åº¦, æ›´å®¹æ˜“çœ‹æ¸….</p>
<p>æƒ³äº†è§£æœ‰å…³é€»è¾‘åƒç´ çš„æ›´å¤šä¿¡æ¯, è¯·æŸ¥çœ‹<a href="https://api.flutter.dev/flutter/dart-ui/Window/devicePixelRatio.html" target="_blank">Flutterå®˜æ–¹æ–‡æ¡£(è‹±æ–‡)</a>
</p>
  </blockquote>

<p><code>update</code>å‡½æ•°å®é™…ä¸Šå‘ç”Ÿåœ¨æ¸²æŸ“ä¹‹å‰(æ— è®ºæ˜¯åˆå§‹åŒ–è¿˜æ˜¯åœ¨game loopä¸­), æ‰€ä»¥è®©æˆ‘ä»¬é¦–å…ˆæ¥å†™å®ƒ:</p>
<pre tabindex="0"><code>void update(double t) {
  if ((painter.text?.text ?? &#39;&#39;) != game.score.toString()) {
    painter.text = TextSpan(
      text: game.score.toString(),
      style: textStyle,
    );

    painter.layout();

    position = Offset(
      (game.screenSize.width / 2) - (painter.width / 2),
      (game.screenSize.height * .25) - (painter.height / 2),
    );
  }
}
</code></pre>


  <blockquote>
    <p>ğŸ’¡ ä»£ç è§£æ: ä¸ºäº†é¿å…ä¸å¿…è¦çš„æ–‡æœ¬å¸ƒå±€é‡æ–°è®¡ç®—, è‹¥å˜é‡<code>painter</code>çš„(æ–‡æœ¬å±æ€§çš„)<code>text</code>å±æ€§ä¸å½“å‰åˆ†æ•°çš„å­—ç¬¦ä¸²ç›¸ç­‰, å°±ä¸ä¼šå‘ç”Ÿä»»ä½•äº‹æƒ….</p>
  </blockquote>

<p>é€šè¿‡ä»¥ä¸‹åˆ¤æ–­å®Œæˆ:</p>
<pre tabindex="0"><code>(painter.text?.text ?? &#39;&#39;) != game.score.toString()
</code></pre><p>è¿™ä¸ªè¡¨è¾¾å¼å·¦ä¾§çœ‹èµ·æ¥æ¯”è¾ƒå¤æ‚, æ‰€ä»¥åœ¨æ­¤è§£é‡Šä¸€ä¸‹. æ­¤è¡¨è¾¾å¼ä½¿ç”¨Dartçš„nullè¿ç®—ç¬¦.<br>
<code>?.</code>ç”¨äºæ£€æŸ¥å…¶å·¦è¾¹çš„å˜é‡æ˜¯å¦ä¸º<code>null</code>, è‹¥ä¸º<code>null</code>åˆ™ç«‹å³åœæ­¢è¡¨è¾¾å¼å¹¶è¿”å›<code>null</code>. æˆ‘ä»¬å·²ç»çŸ¥é“<code>Painter</code>å·²ç»åˆå§‹åŒ–ä¸”ä¸ä¸º<code>null</code>, å› æ­¤æˆ‘ä»¬ä¸ç”¨æ£€æŸ¥å®ƒ. æˆ‘ä»¬ä¸ç¡®å®šçš„æ˜¯<code>painter</code>çš„<code>text</code>å±æ€§æ˜¯å¦ä¸º<code>null</code>, å› æ­¤æˆ‘ä»¬ä½¿ç”¨è¯¥è¿ç®—ç¬¦.</p>
<p>ä½¿ç”¨çš„å¦ä¸€ä¸ªè¿ç®—ç¬¦æ˜¯<code>??.</code>. è‹¥å·¦ä¾§ä¸ä¸ºnull, è¿”å›å·¦ä¾§è¡¨è¾¾å¼; è‹¥ä¸ºnull, è¿”å›å³ä¾§è¡¨è¾¾å¼.</p>
<p>å¯¹äºæ•´ä¸ªè¡¨è¾¾å¼, å¦‚æœæœªè®¾ç½®<code>painter</code>çš„<code>text</code>å±æ€§, åˆ™æ•´ä¸ª<code>painter.text?.text</code>è¿”å›<code>null</code>. ç”±äºå…¶åè·Ÿéšäº†ä¸€ä¸ª<code>??</code>, å› æ­¤ifçš„è¿”å›å€¼æ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸². æœ€ç»ˆçš„å€¼æ˜¯ä¸<code>game.score.toString()</code>è¿›è¡Œæ¯”è¾ƒçš„ç»“æœ. å¦ä¸€æ–¹é¢, å¦‚æœæ²¡æœ‰è®¾ç½®<code>painter</code>çš„<code>text</code>å±æ€§, åˆ™ä¼šè¿”å›å½“å‰çš„å®é™…åˆ†æ•°.</p>
<p>ä½ å¯ä»¥åœ¨è¿™ç¯‡<a href="https://www.bugcatt.com/archives/1025" target="_blank">ã€ŠDart ä¸­çš„ Null-aware (nullæ„ŸçŸ¥è¿ç®—ç¬¦)ã€‹</a>
è·å–Null-awareè¿ç®—ç¬¦(Nullæ„ŸçŸ¥è¿ç®—ç¬¦)çš„æ›´å¤šä¿¡æ¯!</p>
<p>ç°åœ¨å¦‚æœ<code>painter</code>çš„textä¸å½“å‰åˆ†æ•°ä¸ä¸€è‡´, æˆ‘ä»¬ç”¨ä¸€ä¸ªæ–°çš„<code>TextSpan</code>çš„å®ä¾‹æ¥æ›´æ–°å®ƒçš„textå±æ€§, è¯¥å®ä¾‹å°†è·å–æ¸¸æˆä¸­<code>score</code>å˜é‡å’Œå¯é‡å¤ä½¿ç”¨çš„<code>textStyle</code>å˜é‡çš„å½“å‰å€¼. ç„¶åè°ƒç”¨<code>layout</code>å‡½æ•°, ä»¥ä¾¿<code>TextPainter</code>å¯ä»¥è®¡ç®—åˆšåˆšåˆ†é…çš„æ–°æ–‡æœ¬çš„å°ºå¯¸.</p>
<p>ç„¶å, æˆ‘ä»¬ç”¨ä¸€ä¸ªæ–°çš„<code>Offset</code>å®ä¾‹å¹¶å°†å…¶åˆ†é…ç»™<code>position</code>å˜é‡. æˆ‘ä»¬å¸Œæœ›åˆ†æ•°æ°´å¹³å±…ä¸­. è‡³äºå‚ç›´æ–¹ä½, æˆ‘ä»¬å°†scoreçš„å‚ç›´ä¸­å¿ƒæ”¾åœ¨è·å±å¹•é¡¶éƒ¨çº¦1/4çš„é«˜åº¦ä¸Š.</p>
<p>è‹¥æœ‰å…¶ä»–é—®é¢˜, æ¬¢è¿åŠ å…¥<a href="https://jq.qq.com/?_wv=1027&amp;k=5ETLFm3" target="_blank">æˆ‘çš„Flameäº¤æµç¾¤(QQ)</a>
.</p>
<p>æœ€ç»ˆåœ¨<code>render</code>å‡½æ•°ä¸­, æ·»åŠ ä¸‹é¢çš„ä»£ç å—:</p>
<pre tabindex="0"><code>void render(Canvas c) {
  painter.paint(c, position);
}
</code></pre>


  <blockquote>
    <p>ğŸ’¡ ä»£ç è§£æ: é€šè¿‡è°ƒç”¨<code>painter</code>çš„<code>paint()</code>å¹¶æä¾›æ‰€éœ€çš„å‚æ•°æ¥æ¸²æŸ“åˆ†æ•°: ä¸€ä¸ªå¯ä»¥ç”¨äºç»˜åˆ¶çš„ç”»å¸ƒå¹¶ä¸”ç”¨<code>Offset</code>å‘Šè¯‰painteråœ¨å“ªé‡Œç»˜åˆ¶åˆ†æ•°.</p>
  </blockquote>

<p>æ•´ä¸ªçš„<code>./lib/components/score-display.dart</code>æ–‡ä»¶åº”è¯¥åƒè¿™æ ·:</p>
<pre tabindex="0"><code>import &#39;dart:ui&#39;;
import &#39;package:flutter/painting.dart&#39;;
import &#39;package:langaw/langaw-game.dart&#39;;

class ScoreDisplay {
  final LangawGame game;
  TextPainter painter;
  TextStyle textStyle;
  Offset position;

  ScoreDisplay(this.game) {
    painter = TextPainter(
      textAlign: TextAlign.center,
      textDirection: TextDirection.ltr,
    );

    textStyle = TextStyle(
      color: Color(0xffffffff),
      fontSize: 90,
      shadows: [
        Shadow(
          blurRadius: 7,
          color: Color(0xff000000),
          offset: Offset(3, 3),
        ),
      ],
    );

    position = Offset.zero;
  }

  void render(Canvas c) {
    painter.paint(c, position);
  }

  void update(double t) {
    if ((painter.text?.text ?? &#39;&#39;) != game.score.toString()) {
      painter.text = TextSpan(
        text: game.score.toString(),
        style: textStyle,
      );

      painter.layout();

      position = Offset(
        (game.screenSize.width / 2) - (painter.width / 2),
        (game.screenSize.height * .25) - (painter.height / 2),
      );
    }
  }
}
</code></pre><h4 id="ç»˜åˆ¶åˆ†æ•°component">ç»˜åˆ¶åˆ†æ•°component</h4>
<p>è‹¥è¦çœŸæ­£çš„æŠŠåˆ†æ•°componentæ¸²æŸ“åœ¨å±å¹•ä¸Š, æˆ‘ä»¬å¿…é¡»å°†å…¶æ·»åŠ è‡³gameç±», å¹¶å°†å…¶åŒ…å«åœ¨game loopä¸­.</p>
<p>è€è§„çŸ©, æ‰“å¼€<code>./lib/langaw-game.dart</code>, å¯¼å…¥åˆšåˆšåˆ›å»ºçš„ç±»:</p>
<pre tabindex="0"><code>import &#39;package:langaw/components/score-display.dart&#39;;
</code></pre><p>åˆ›å»º<code>ScoreDisplay</code>ç±»å‹çš„å®ä¾‹å˜é‡:</p>
<pre tabindex="0"><code>ScoreDisplay scoreDisplay;
</code></pre><p>åœ¨<code>initialize()</code>ä¸­(è°ƒç”¨<code>resize</code>ä¹‹å)åˆ›å»ºä¸€ä¸ªæ–°çš„<code>ScoreDisplay</code>å®ä¾‹, å¹¶å°†å…¶èµ‹å€¼ç»™<code>scoreDisplay</code>å˜é‡(æ³¨æ„å¤§å°å†™å“¦), æœ€å¥½åœ¨åˆå§‹åŒ–æŒ‰é’®çš„ä¸‹æ–¹:</p>
<pre tabindex="0"><code>scoreDisplay = ScoreDisplay(this);
</code></pre><p>åœ¨<code>update()</code>å†…éƒ¨, åˆ¤æ–­å½“å‰çš„ç•Œé¢æ˜¯å¦ä¸º<code>View.playing</code>, è‹¥æ˜¯, åˆ™è°ƒç”¨<code>scoreDisplay</code>çš„<code>update</code>å‡½æ•°. ä½ å¯ä»¥å°†æ­¤è¡Œæ”¾åœ¨ä»»ä½•åœ°æ–¹.</p>
<p>åœ¨å‡½æ•°æœ«å°¾æ·»åŠ :</p>
<pre tabindex="0"><code>if (activeView == View.playing) scoreDisplay.update(t);
</code></pre><p>ç„¶ååœ¨gameç±»çš„<code>render()</code>ä¸­, æˆ‘ä»¬åšç±»ä¼¼çš„äº‹æƒ…, ä½†æ˜¯æ˜¯è°ƒç”¨<code>render()</code>. è®°ä½åœ¨æ­¤å‡½æ•°å†…å†™å…¥è¡Œçš„é¡ºåºæ˜¯å›¾å½¢åœ¨å±å¹•ä¸Šç»˜åˆ¶çš„å®é™…é¡ºåº.</p>
<p>æˆ‘ä»¬å¸Œæœ›scoreæ­£å¥½é«˜äºèƒŒæ™¯, ä½äºå…¶ä»–çš„æ‰€æœ‰ä¸œè¥¿. å°é£è‡å¯ä»¥é£è¶Šå®ƒ. å› æ­¤, åœ¨æ¸²æŸ“èƒŒæ™¯åæ·»åŠ :</p>
<pre tabindex="0"><code>if (activeView == View.playing) scoreDisplay.render(canvas);
</code></pre><p><img src="images/02-3.png" alt=""></p>
<h4 id="å¤„ç†å°é£è‡åŠ åˆ†">å¤„ç†å°é£è‡åŠ åˆ†</h4>
<p>ç©å®¶æƒ³è¦åŠ åˆ†, å¿…é¡»å‡»è½å°é£è‡.</p>
<p>è¦æ‹¥æœ‰è¿™å¥—é€»è¾‘, æ‰“å¼€<code>./lib/components/fly.dart</code>. ä¸ºäº†ç­‰ä¸‹ä½¿ç”¨, å¯¼å…¥<code>View</code>æšä¸¾ç±».</p>
<pre tabindex="0"><code>import &#39;package:langaw/view.dart&#39;;
</code></pre><p>åœ¨<code>onTapDown</code>å¤„ç†å™¨å†…éƒ¨, æ›¿æ¢å·²å­˜åœ¨çš„é‚£ä¸€è¡Œä»£ç ä¸º:</p>
<pre tabindex="0"><code>if (!isDead) {
  isDead = true;

  if (game.activeView == View.playing) {
    game.score += 1;
  }
}
</code></pre>


  <blockquote>
    <p>ğŸ’¡ ä»£ç è§£æ: å½“ä¸€åªå°é£è‡è¢«ç‚¹å‡», æˆ‘ä»¬é¦–å…ˆè¦æ£€æŸ¥å®ƒæ˜¯å¦æ´»ç€(<code>!isDead</code>). å¦‚æœå°é£è‡å·²ç»æŒ‚æ‰, é‚£ä¹ˆä»€ä¹ˆä¹Ÿä¸ä¼šå‘ç”Ÿ. å¦‚æœè¿˜æ´»ç€, æˆ‘ä»¬è®¾ç½®å…¶<code>isDead</code>å‚æ•°å€¼ä¸º<code>true</code>è®©componentçŸ¥é“å°é£è‡å·²ç»æ­»æ‰.</p>
<p>ä¹‹å, æˆ‘ä»¬å°†åˆ¤æ–­å½“å‰ç•Œé¢æ˜¯å¦ä¸ºplaying. å¦‚æœç©å®¶æ²¡æœ‰å¼€å§‹æ¸¸æˆ, é‚£ä¹ˆå°±ä¸éœ€è¦æ–°å¢åˆ†æ•°. è‹¥ç©å®¶åœ¨æ¸¸æˆä¸­, åˆ™å¢åŠ åˆ†æ•°. è¿™å°†æ›´æ–°<code>ScoreDisplay</code>å®ä¾‹.</p>
  </blockquote>

<p>è¿è¡Œæ¸¸æˆ, ä½ åº”è¯¥å¯ä»¥çœ‹åˆ°åˆ†æ•°äº†:</p>
<p><img src="images/03-2.png" alt=""></p>
<h4 id="è¿›é˜¶ç‰ˆå°é£è‡">è¿›é˜¶ç‰ˆå°é£è‡</h4>
<p>å°é£è‡ä¸ä»…ä»…æ˜¯é£æ¥é£å», å®ƒä»¬åŒæ—¶ä¹Ÿä¼šè¿›é£Ÿ. å¦å¤–, è‹¥ç©å®¶åªæ˜¯ä¼ºæœºè€ŒåŠ¨ç²¾å‡†å‡»è½å°é£è‡, å¤šå°‘æœ‰äº›æ— èŠğŸ¤ğŸ¤.</p>
<p>è®©æˆ‘ä»¬å†æ¥æ·»åŠ ä¸€ä¸ªæ¸¸æˆå¤±è´¥çš„æ¡ä»¶ğŸ˜².</p>
<p>ä¸€æ—¦å°é£è‡å‡ºç°åœ¨å±å¹•ä¸Š, å®ƒä¼šæ˜¾ç¤ºä¸€ä¸ªå€’æ•°çš„è®¡æ•°å™¨. è¿™ä¸ªè®¡æ•°å™¨ç›¸å½“äºå°é£è‡è¿˜æœ‰å¤šä¹…&quot;åƒå®Œ&quot;. å½“è®¡æ•°å™¨å½’é›¶æ—¶, æ„å‘³ç€å°é£è‡&quot;åƒå®Œ&quot;, æ¸¸æˆå¤±è´¥.</p>
<p>è¿™æ ·æ¸¸æˆå°±å¢åŠ äº†æŒ‘æˆ˜æ€§, æ²¡æœ‰ä¹‹å‰é‚£ä¹ˆæ— èŠäº†.</p>
<p>æˆ‘ä»¬å¿…é¡»ç¡®ä¿ç©å®¶å¯ä»¥æ³¨æ„åˆ°è®¡æ•°å™¨, çœ‹çœ‹é‚£äº›å°é£è‡å³å°†å½’é›¶. æˆ‘ä»¬å°†ä½¿ç”¨èµ„æºåŒ…ä¸­çš„æ ‡æ³¨å›¾å½¢æ¥æ˜¾ç¤ºæ­¤è®¡æ•°å™¨.</p>
<p>è®©æˆ‘ä»¬æ·»åŠ èµ„æºåŒ…ä¸­çš„æ ‡æ³¨å›¾å½¢<code>./assets/images/ui/callout.png</code>åˆ°èµ„æºç›®å½•ä¸­, ç„¶åè¦æŠŠå®ƒæ³¨å†Œè¿›<code>./pubspec.yaml</code>ä¸­:</p>
<pre tabindex="0"><code>    - assets/images/ui/callout.png
</code></pre><p>ç„¶åæ‰“å¼€<code>./lib/main.dart</code>å¹¶æ·»åŠ <code>ui/callout.png</code>åˆ°é¢„åŠ è½½çš„å›¾åƒListä¸­. åœ¨<code>Flame.images.loadAll</code>ä¸­:</p>
<pre tabindex="0"><code>Flame.images.loadAll([
  // å…¶ä»–çš„å›¾ç‰‡èµ„æº
  &#39;ui/callout.png&#39;,
]);
</code></pre><p>ç„¶å, åˆ›å»ºä¸ºæ­¤æ ‡æ³¨åˆ›å»ºä¸€ä¸ªcomponent, <code>./lib/components/callout.dart</code>:</p>
<pre tabindex="0"><code>import &#39;dart:ui&#39;;
import &#39;package:flame/sprite.dart&#39;;
import &#39;package:flutter/material.dart&#39;;
import &#39;package:langaw/components/fly.dart&#39;;

class Callout {
  final Fly fly;
  Rect rect;
  Sprite sprite;
  double value;

  TextPainter tp;
  TextStyle textStyle;
  Offset textOffset;

  Callout(this.fly) {}

  void render(Canvas c) {}

  void update(double t) {}
}
</code></pre>


  <blockquote>
    <p>ğŸ’¡ ä»£ç è§£æ: è¿™é‡Œæˆ‘ä»¬åˆåˆ›å»ºäº†ä¸€ä¸ªç›¸å½“æ ‡å‡†çš„component. åªä¸è¿‡å¼•å…¥çš„ä¸æ˜¯<code>game</code>è€Œæ˜¯fly. å°±åƒfly componentçš„å­ç±»ä¸€æ ·.</p>
  </blockquote>

<p>æ­¤ç±»å…·æœ‰å…¶ä»–å®ä¾‹å˜é‡, è¿™äº›å®ä¾‹å˜é‡å°†ç”¨äºç»˜åˆ¶æ ‡æ³¨ä¸­çš„å€¼.</p>
<p>ç»§ç»­åˆå§‹åŒ–æ„é€ å‡½æ•°çš„å€¼:</p>
<pre tabindex="0"><code>Callout(this.fly) {
  sprite = Sprite(&#39;ui/callout.png&#39;);
  value = 1;
  tp = TextPainter(
    textAlign: TextAlign.center,
    textDirection: TextDirection.ltr,
  );
  textStyle = TextStyle(
    color: Color(0xff000000),
    fontSize: 15,
  );
}
</code></pre>


  <blockquote>
    <p>ğŸ’¡ ä»£ç è§£æ: åˆ«å¤´å¤§, bodyå®é™…ä¸Šåªæœ‰4è¡Œ. ä¸ºäº†ä¾¿äºé˜…è¯»æ‰æŠŠå®ƒå‚ç›´ä¼¸å±•å¼€. åœ¨æ„é€ å‡½æ•°å†…éƒ¨, æˆ‘ä»¬åªä¸ºå®ä¾‹å˜é‡åˆ†é…åˆå§‹åŒ–å€¼. åœ¨<code>update</code>å‡½æ•°ä¸­, æˆ‘ä»¬å°†å˜é‡å‡å°‘ä¸€å®šçš„å€¼, è‹¥é™è‡³0, åˆ™å°†æ¸¸æˆä¸­çš„å½“å‰ç•Œé¢æ”¹ä¸º<code>you lose</code>. å½“ç„¶, ä¸Šè¿°æ“ä½œä»…åœ¨ç•Œé¢ä¸º<code>playing</code>æ—¶æ‰è¿›è¡Œ.</p>
  </blockquote>

<p>å…ˆå¯¼å…¥:</p>
<pre tabindex="0"><code>import &#39;package:langaw/view.dart&#39;;
</code></pre><p>å†å°†ä»¥ä¸‹ä»£ç å—æ”¾å…¥<code>update</code>å‡½æ•°ä¸­:</p>
<pre tabindex="0"><code>if (fly.game.activeView == View.playing) {
  value = value - .5 * t;
  if (value &lt;= 0) {
    fly.game.activeView = View.lost;
  }
}
</code></pre>


  <blockquote>
    <p>ğŸ’¡ ä»£ç è§£æ: é¦–å…ˆ, æ£€æŸ¥ç•Œé¢æ˜¯å¦ä¸º<code>View.playing</code>, è‹¥æ˜¯åˆ™ä»å€¼ä¸­å‡å»<code>0.5 * t</code>. <code>t</code>å˜é‡åŒ…å«ä¸Šæ¬¡è°ƒç”¨<code>update</code>æ—¶é—´çš„1/2. æ­¤è®¡ç®—å¯ç¡®ä¿å°é£è‡çš„å¯¿å‘½ä¸º2ç§’.</p>
<p>ç„¶åæˆ‘ä»¬åˆ¤æ–­è¯¥å€¼æ˜¯å¦ä¸º0. è‹¥æ˜¯åˆ™å‘Šè¯‰ç©å®¶è¾“æ‰æ¸¸æˆ.</p>
  </blockquote>

<p>ä¹‹åæˆ‘ä»¬ç¡®ä¿æ­¤æ ‡æ³¨çš„<code>rect</code>å˜é‡å·²æ›´æ–°, ä»¥ä¾¿<code>render()</code>ç›¸å¯¹äºçˆ¶çº§<code>fly</code>æ­£ç¡®æ”¾ç½®. è¯¥ä»£ç å—åˆšå¥½åœ¨å‡å°‘<code>value</code>å—ä¸‹æ–¹:</p>
<pre tabindex="0"><code>rect = Rect.fromLTWH(
  fly.flyRect.left - (fly.game.tileSize * .25),
  fly.flyRect.top - (fly.game.tileSize * .5),
  fly.game.tileSize * .75,
  fly.game.tileSize * .75,
);
</code></pre>


  <blockquote>
    <p>ğŸ’¡ ä»£ç è§£æ: åˆ°ç›®å‰ä¸ºæ­¢, ä¸æˆ‘ä»¬å®Œæˆçš„æ‰€æœ‰å…¶ä»–<code>Rect</code>çš„åˆå§‹åŒ–ä¸€è‡´, å®é™…ä¸Šåªæœ‰ä¸€è¡Œä»£ç . æœ€åä¸¤ä¸ªå‚æ•°æ˜¯<code>rect</code>çš„<strong>å®½</strong>åº¦å’Œ<strong>é«˜</strong>åº¦, å®ƒä»¬éƒ½è®¾ç½®ä¸ºåŒºå—å¤§å°çš„3/4. <strong>L</strong>eftçš„å€¼ä¸å°é£è‡çš„<code>rect</code>å‡å»åŒºå—å¤§å°çš„1/4ç›¸åŒ. <strong>T</strong>opçš„å€¼ä½¿ç”¨ç›¸åŒçš„é€»è¾‘, ä¸åŒçš„æ˜¯å‡å»åŒºå—å¤§å°çš„1/2.</p>
  </blockquote>

<p>ä»ç„¶åœ¨<code>update</code>å‡½æ•°ä¸­, æœ€åçš„ä»£ç å—å°†æ›´æ–°æ–‡æœ¬painter, è¯¥painteråœ¨æ ‡æ³¨å›¾å½¢ä¸­ç»˜åˆ¶å½“å‰çš„å€¼.</p>
<pre tabindex="0"><code>tp.text = TextSpan(
  text: (value * 10).toInt().toString(),
  style: textStyle,
);
tp.layout();
textOffset = Offset(
  rect.center.dx - (tp.width / 2),
  rect.top + (rect.height * .4) - (tp.height / 2),
);
</code></pre>


  <blockquote>
    <p>ğŸ’¡ ä»£ç è§£æ: ç”±äºæˆ‘ä»¬å·²ç»ä½¿ç”¨<code>TextPainter</code>ç±»çš„å®ä¾‹åˆå§‹åŒ–äº†<code>tp</code>å˜é‡, å› æ­¤æˆ‘ä»¬åªæ˜¯å°†å…¶<code>text</code>å±æ€§è®¾ç½®ä¸º<code>TextSpan</code>ç±»çš„å®ä¾‹, å°†å½“å‰å€¼ä¹˜ä»¥10è½¬æ¢ä¸ºæ•´æ•°, ç„¶åè½¬æ¢ä¸ºå­—ç¬¦ä¸².</p>
  </blockquote>

<p>è¯¥å€¼ä¹˜ä»¥10, å°±å¥½åƒä»9æ•°åˆ°0ä¸€è¡Œ.</p>
<p>ç„¶åæˆ‘ä»¬è°ƒç”¨<code>layout</code>å‡½æ•°, ä»¥ä¾¿<code>tp</code>çŸ¥é“å°†ç»™æ–‡æœ¬å­—ç¬¦ä¸²å’Œæä¾›ç»™å®ƒçš„æ ·å¼ä»¥åŠæ–‡æœ¬å¤§å°.</p>
<p>æ¥ä¸‹æ¥, æˆ‘ä»¬ä½¿ç”¨æ–°çš„<code>Offset</code>æ¥æ›´æ–°<code>textOffset</code>çš„å€¼, è¯¥<code>Offset</code>ä¼šä¼ é€’ä¸€ä¸ªè®¡ç®—, å°†æ–‡æœ¬å±…ä¸­åœ¨æ ‡æ³¨çš„ç™½è‰²åŒºåŸŸå†….</p>
<p>æœ€åç¼–å†™<code>render()</code>:</p>
<pre tabindex="0"><code>void render(Canvas c) {
    if (rect != null){
      sprite.renderRect(c, rect);
      tp.paint(c, textOffset);
    }
}
</code></pre>


  <blockquote>
    <p>ğŸ’¡ ä»£ç è§£æ: é¦–å…ˆæˆ‘ä»¬æ¸²æŸ“æ ‡æ³¨(ç°åœ¨åº”è¯¥æ¯”è¾ƒç†Ÿæ‚‰äº†). ç„¶åæˆ‘ä»¬ä½¿ç”¨<code>TextPainter</code>çš„<code>paint</code>å‡½æ•°æ¥ç»˜åˆ¶æ–‡æœ¬, å¹¶ä¼ é€’æˆ‘ä»¬åˆšåˆšåœ¨<code>update</code>å‡½æ•°ä¸­æ›´æ–°çš„<code>textOffset</code>å˜é‡.</p>
  </blockquote>

<p>æ•´ä¸ªçš„Calloutç±»:</p>
<pre tabindex="0"><code>import &#39;dart:ui&#39;;
import &#39;package:flame/sprite.dart&#39;;
import &#39;package:flutter/material.dart&#39;;
import &#39;package:langaw/components/fly.dart&#39;;

import &#39;package:langaw/view.dart&#39;;

class Callout {
  final Fly fly;
  Rect rect;
  Sprite sprite;
  double value;

  TextPainter tp;
  TextStyle textStyle;
  Offset textOffset;

  Callout(this.fly) {
    sprite = Sprite(&#39;ui/callout.png&#39;);
    value = 1;
    tp = TextPainter(
      textAlign: TextAlign.center,
      textDirection: TextDirection.ltr,
    );
    textStyle = TextStyle(
      color: Color(0xff000000),
      fontSize: 15,
    );
  }

  void render(Canvas c) {
    if (rect != null){
      sprite.renderRect(c, rect);
      tp.paint(c, textOffset);
    }
  }

  void update(double t) {
    if (fly.game.activeView == View.playing) {
      value = value - .5 * t;
      if (value &lt;= 0) {
        fly.game.activeView = View.lost;
      }
    }
    rect = Rect.fromLTWH(
      fly.flyRect.left - (fly.game.tileSize * .25),
      fly.flyRect.top - (fly.game.tileSize * .5),
      fly.game.tileSize * .75,
      fly.game.tileSize * .75,
    );

    tp.text = TextSpan(
      text: (value * 10).toInt().toString(),
      style: textStyle,
    );
    tp.layout();
    textOffset = Offset(
      rect.center.dx - (tp.width / 2),
      rect.top + (rect.height * .4) - (tp.height / 2),
    );
  }
}
</code></pre><p>ç°åœ¨æˆ‘ä»¬åªéœ€å°†æ ‡æ³¨componentæ·»åŠ è‡³</p>
<p><code>Fly</code>ç±»ä¸­. æ­¤è¿‡ç¨‹åº”è¯¥ä¹Ÿæ¯”è¾ƒç†Ÿæ‚‰äº†, å› ä¸ºæˆ‘ä»¬åœ¨å‰é¢åšè¿‡ç±»ä¼¼çš„æ“ä½œ. æ‰“å¼€<code>./lib/components/fly.dart</code>, å¯¼å…¥<code>Callout</code>:</p>
<pre tabindex="0"><code>import &#39;package:langaw/components/callout.dart&#39;;
</code></pre><p>æ·»åŠ å®ä¾‹å˜é‡ç”¨äºä¿å­˜callout:</p>
<pre tabindex="0"><code>Callout callout;
</code></pre><p>åœ¨<code>Fly</code>æ„é€ å‡½æ•°ä¸­, åˆå§‹åŒ–<code>callout</code>å˜é‡å¹¶ä¸”ä½¿ç”¨<code>this</code>å…³é”®å­—ç”¨äºä¼ å…¥å½“å‰çš„Fly:</p>
<pre tabindex="0"><code>callout = Callout(this);
</code></pre><p>å¦‚æœå°é£è‡æ²¡æœ‰æ­»æ‰, é‚£ä¹ˆæ ‡æ³¨å°±éœ€è¦è¿›è¡Œæ›´æ–°. å› æ­¤åœ¨<code>Fly</code>çš„<code>update</code>å‡½æ•°å†…, åœ¨<code>else</code>(å°é£è‡å°šæœªæ­»æ‰)ä»£ç å—åº•éƒ¨æ·»åŠ :</p>
<pre tabindex="0"><code>callout.update(t);
</code></pre><p>æœ€ç»ˆ, è‹¥å°é£è‡è¿˜æ²¡æ­»(<code>else</code>å—å†…)å¹¶ä¸”å½“å‰çš„ç•Œé¢ä¸º<code>playing</code>, åˆ™æ¸²æŸ“æ ‡æ³¨. æ·»åŠ åˆ°<code>render</code>ä¸­:</p>
<pre tabindex="0"><code>if (game.activeView == View.playing) {
  callout.render(c);
}
</code></pre><p>ğŸŸ¢ è¿è¡Œæ¸¸æˆ, çœ‹çœ‹æ•ˆæœ:</p>
<p><img src="images/04-1.gif" alt=""></p>
<p><strong>ğŸ‘‰åœ¨<a href="https://github.com/HarrisonQi/flame-tutorial-langaw/tree/904d05b9be2293cd9dede4acfcc86c93e1097468" target="_blank">Github</a>
æˆ–<a href="https://github.com/HarrisonQi/flame-tutorial-langaw/tree/904d05b9be2293cd9dede4acfcc86c93e1097468" target="_blank">ç äº‘</a>
ä¸ŠæŸ¥çœ‹è¿™éƒ¨åˆ†çš„ä»£ç .</strong></p>
<h3 id="ç¬¬äºŒæ­¥-å­˜å‚¨æœ€é«˜åˆ†">ç¬¬äºŒæ­¥: å­˜å‚¨æœ€é«˜åˆ†</h3>
<p>å¦‚æœæ¸¸æˆæ²¡æœ‰è®°å½•æœ€é«˜åˆ†, é‚£ä¹ˆè·å¾—è¿™ä¸ªå®è´µçš„åˆ†æ•°å°†æ˜¯ä¸€ç§æµªè´¹.</p>
<p>è®©æˆ‘ä»¬æ¥è®°å½•æœ€é«˜åˆ†, è¿™æ ·ç©å®¶å°±å¯ä»¥ä¸æ–­çªç ´è‡ªå·±, å–å¾—æ›´é«˜çš„åˆ†æ•°.</p>
<p>è®°å½•æœ€é«˜åˆ†, ä»…éœ€å­˜å‚¨ä¸€æ¡æ•°æ®. åªæ˜¯ä¸€ä¸ªæ•´æ•°.</p>
<p>è¿™ä¸ªç®€å•çš„ä»»åŠ¡å¯ä»¥é€šè¿‡<code>shared_preferences</code>ç¬¬ä¸‰æ–¹åº“æ¥è§£å†³. è¿™ä¸ªåº“åŒ…å«<code>SharedPreferences</code>, å®ƒå¯ä»¥å¤„ç†ç®€å•çš„æ•°æ®(æ•°å­—ã€å­—ç¬¦ä¸²ä»¥åŠå¸ƒå°”å€¼). å®ƒè¿˜åœ¨å†…éƒ¨å¤„ç†æ ¹æ®ä¸åŒæ“ä½œç³»ç»Ÿ(IOSå’ŒAndroid)æ¥ä¿å­˜æ•°æ®.</p>



  <blockquote>
    <p>è‹¥æƒ³äº†è§£<code>SharedPreference</code>æ›´å¤šå†…å®¹, æ¬¢è¿é˜…è¯»é˜¿èˆªçš„è¿™ç¯‡<a href="https://www.bugcatt.com/archives/165" target="_blank">ã€ŠFlutter æ•°æ®å­˜å‚¨ SharedPreferencesã€‹</a>
. é‡Œé¢åŒ…å«è¶…è¯¦ç»†è®²è§£.</p>
  </blockquote>

<h4 id="å‡†å¤‡æ•°æ®å­˜å‚¨">å‡†å¤‡æ•°æ®å­˜å‚¨</h4>
<p>å°±åƒFlameä¸€æ ·, <code>shared_preferences</code>ä¹Ÿæ˜¯Flutterçš„ä¸€ä¸ªæ’ä»¶. è‹¥è¦å®‰è£…æ­¤æ’ä»¶, æ‰“å¼€<code>./pubspec.yaml</code>å¹¶ä¸”æ·»åŠ ä»¥ä¸‹è¡Œåœ¨<code>dependencies</code>ä¸­, <code>flame</code>ä¸‹æ–¹:</p>
<pre tabindex="0"><code>    shared_preferences: ^0.5.1+2
</code></pre>


  <blockquote>
    <p>ğŸŸ¡ æç¤º: æ³¨æ„ç¼©è¿›! è‹¥æ ¼å¼æœ‰è¯¯å°†ä¼šå‡ºç°é”™è¯¯å“¦!</p>
  </blockquote>

<p>è¿è¡Œ<code>packages get</code>.</p>
<p>ä¸ºäº†æ›´è½»æ¾çš„è¯»å†™æ•°æ®, æˆ‘ä»¬éœ€è¦åœ¨<code>game</code>çš„contextä¸­åˆ›å»º<code>SharedPreference</code>å®ä¾‹å˜é‡.</p>
<p>æ‰“å¼€<code>./lib/langaw-game.dart</code>, å¯¼å…¥<code>shared_preferences</code>:</p>
<pre tabindex="0"><code>import &#39;package:shared_preferences/shared_preferences.dart&#39;;
</code></pre><p>ç„¶ååœ¨<code>LangawGame</code>ç±»ä¸­æ·»åŠ <code>final</code>å®ä¾‹å˜é‡. è¿™æ ·ç”šè‡³ä¼šåœ¨åˆ›å»º<code>LangawGame</code>å®ä¾‹å‰å°±å‡†å¤‡å¥½<code>SharedPreference</code>å®ä¾‹:</p>
<pre tabindex="0"><code>final SharedPreferences storage;
</code></pre><p>æ ‡è®°ä¸º<code>final</code>çš„ä»»ä½•å®ä¾‹å˜é‡å¿…é¡»åœ¨å£°æ˜æ—¶å…·æœ‰åˆå§‹å€¼, å¦åˆ™å¿…é¡»é€šè¿‡æ„é€ å‡½æ•°å°†å…¶ä¼ é€’ç»™å®ƒ. å› æ­¤æˆ‘ä»¬æ¥ä¿®æ”¹æ„é€ å‡½æ•°:</p>
<pre tabindex="0"><code>LangawGame(this.storage) {
  initialize();
}
</code></pre><p>åœ¨æ„é€ å‡½æ•°ä¸­, ä½¿ç”¨ä»¥<code>this.</code>ä¸ºå‰ç¼€çš„å‚æ•°æ—¶, æ„å‘³ç€ä¼ é€’ç»™å®ƒçš„ä»»ä½•å€¼éƒ½æ˜¯å…¶åç§°æ‰€ä»£è¡¨çš„å˜é‡å€¼.</p>
<p>åœ¨å…¶ä¹‹å, è·³è½¬è‡³<code>./lib/main.dart</code>æ–‡ä»¶, ä»¥ä¾¿æˆ‘ä»¬å¯ä»¥æ­£ç¡®åˆå§‹åŒ–gameç±».</p>
<p>é¦–å…ˆå¯¼å…¥<code>shared_preferences</code>:</p>
<pre tabindex="0"><code>import &#39;package:shared_preferences/shared_preferences.dart&#39;;
</code></pre><p>æ¥ä¸‹æ¥åœ¨<code>main</code>å‡½æ•°ä¸­åˆ›å»º<code>SharedPreferences</code>çš„å®ä¾‹:</p>
<pre tabindex="0"><code>SharedPreferences storage = await SharedPreferences.getInstance();
</code></pre>


  <blockquote>
    <p>ğŸŸ¡ æç¤º: <code>.getInstance</code>å·¥å‚è¿”å›ä¸€ä¸ª<code>Future</code>, å› æ­¤æˆ‘ä»¬å¿…é¡»ä½¿ç”¨<code>await</code>å…³é”®å­—æ¥ç­‰å¾…<code>Futrue</code>è¿”å›å†…å®¹(éœ€è¦<code>SharedPreferences</code>çš„ä¸€ä¸ªå®ä¾‹). <code>main</code>å‡½æ•°å·²ç»ä¸º<code>async</code>, å› æ­¤æˆ‘ä»¬å¯ä»¥ç­‰å¾…<code>main</code>ä¸­çš„<code>Future</code>.</p>
  </blockquote>

<p>åœ¨å£°æ˜<code>LangawGame</code>å®ä¾‹çš„ä»£ç éƒ¨åˆ†, ä¼ é€’æˆ‘ä»¬åˆšåˆšå£°æ˜çš„ç¬¬ä¸€ä¸ª(ä¹Ÿæ˜¯å”¯ä¸€ä¸€ä¸ª)å‚æ•°çš„<code>storage</code>å˜é‡:</p>
<pre tabindex="0"><code>LangawGame game = LangawGame(storage);
</code></pre><p>ç°åœ¨åªè¦æˆ‘ä»¬å¯ä»¥è®¿é—®game, å°±å¯ä»¥è®¿é—®<code>storage</code>å˜é‡(LangawGameç±»çš„å®ä¾‹).</p>
<h4 id="æ˜¾ç¤ºæœ€é«˜åˆ†">æ˜¾ç¤ºæœ€é«˜åˆ†</h4>
<p>æˆ‘ä»¬çš„æ¸¸æˆåº”è¯¥å§‹ç»ˆæ˜¾ç¤ºæœ€é«˜åˆ†. æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç±»ä¼¼<code>ScoreDisplay</code>çš„å¦ä¸€ä¸ªcomponentæ¥æ‰§è¡Œæ­¤æ“ä½œ.</p>
<p>åˆ›å»º<code>./lib/components/highscore-display.dart</code>æ–‡ä»¶, å¹¶ç¼–å†™å†…å®¹:</p>
<pre tabindex="0"><code>import &#39;dart:ui&#39;;
import &#39;package:flutter/painting.dart&#39;;
import &#39;package:langaw/langaw-game.dart&#39;;

class HighscoreDisplay {
  final LangawGame game;
  TextPainter painter;
  TextStyle textStyle;
  Offset position;

  HighscoreDisplay(this.game) {}

  void render(Canvas c) {}
}
</code></pre>


  <blockquote>
    <p>ğŸ’¡ ä»£ç è§£æ: å¦‚ä½ æ‰€è§, è¿™æ˜¯ä¸€ä¸ªç›¸å½“æ ‡å‡†çš„ä¸å«<code>update</code>çš„ç±»æ–‡ä»¶. å› ä¸ºåˆ†æ•°å°†ä¼šè¢«æ‰‹åŠ¨æ›´æ–°.</p>
  </blockquote>

<p>å®ä¾‹å˜é‡å¿…é¡»åœ¨åˆ›å»ºæ­¤ç±»å®ä¾‹æ—¶è¢«åˆå§‹åŒ–, å› æ­¤ä¿®æ”¹æ„é€ å‡½æ•°ä¸º:</p>
<pre tabindex="0"><code>HighscoreDisplay(this.game) {
  painter = TextPainter(
    textAlign: TextAlign.center,
    textDirection: TextDirection.ltr,
  );

  Shadow shadow = Shadow(
    blurRadius: 3,
    color: Color(0xff000000),
    offset: Offset.zero,
  );

  textStyle = TextStyle(
    color: Color(0xffffffff),
    fontSize: 30,
    shadows: [shadow, shadow, shadow, shadow],
  );

  position = Offset.zero;

  updateHighscore();
}
</code></pre>


  <blockquote>
    <p>ğŸ’¡ æ„é€ å‡½æ•°è§£æ: ç¬¬ä¸€éƒ¨åˆ†ä½¿ç”¨<code>TextPainter</code>çš„ç±»å®ä¾‹åˆå§‹åŒ–<code>painter</code>å˜é‡, è¯¥ç±»åŒ…å«æ–‡æœ¬å¯¹é½å’Œæ–¹å‘æ‰€éœ€çš„å€¼.</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªå†…éƒ¨çš„<code>Shadow</code>å˜é‡, å°†å…¶æ·»åŠ åˆ°ä¸‹é¢åˆå§‹åŒ–çš„<code>textStyle</code>æ—¶, å°†æœ‰åŠ©äºåˆ›å»ºé˜´å½±æ•ˆæœ. æˆ‘ä»¬æ”¾ç½®äº†<code>shadow</code>å˜é‡çš„å››ä¸ªå®ä¾‹, å› æ­¤å½“å®ƒä»¬é‡å æ—¶, å®ƒä»¬åŒ…å«é˜´å½±.</p>
<p><code>position</code>å˜é‡è®¾ç½®åˆå§‹åŒ–ä¸ºé›¶<code>(0, 0)</code>.</p>
<p>æœ€å, æˆ‘ä»¬è°ƒç”¨ä¸€ä¸ªåä¸º<code>updateHighscore()</code>çš„å‡½æ•°. è¿™å°†è‡ªåŠ¨æ›´æ–°é«˜åˆ†å€¼ä»¥åŠå¯¹painterå¯¹è±¡ç»˜åˆ¶çš„æ–‡æœ¬è¿›è¡Œå¤„ç†.</p>
  </blockquote>

<p>æ¥ä¸‹æ¥æ·»åŠ å‡½æ•°, ç”¨äºæ„å»ºæ‰‹åŠ¨æ›´æ–°:</p>
<pre tabindex="0"><code>void updateHighscore() {
  int highscore = game.storage.getInt(&#39;highscore&#39;) ?? 0;

  painter.text = TextSpan(
    text: &#39;High-score: &#39; + highscore.toString(),
    style: textStyle,
  );

  painter.layout();

  position = Offset(
    game.screenSize.width - (game.tileSize * .25) - painter.width,
    game.tileSize * .25,
  );
}
</code></pre>


  <blockquote>
    <p>ğŸ’¡ ä»£ç è§£æ: åœ¨è¿™ä¸ªå‡½æ•°ä¸­, æˆ‘ä»¬ä»ä¿å­˜åœ¨gameç±»çš„<code>storage</code>å˜é‡ä¸­çš„<code>SharedPreference</code>å®ä¾‹ä¸­è·å¾—æœ€é«˜åˆ†çš„å€¼. ç”±äºæˆ‘ä»¬çš„åˆ†æ•°(å’Œæœ€é«˜åˆ†)åªæ˜¯æ•´æ•°, æ‰€ä»¥æˆ‘ä»¬å°†å…¶å­˜å‚¨ä¸º<code>integer</code>.</p>
<p>ç„¶åæˆ‘ä»¬æ›´æ–°<code>painter</code>çš„<code>text</code>å±æ€§ä¸ºä¸€ä¸ªæ–°çš„<code>TextSpan</code>, å¹¶ä¼ å…¥åˆšåˆšçš„æœ€é«˜åˆ†. è¿™å’Œ<code>ScoreDisplay</code>ä¸­çš„æ›´æ–°è¿‡ç¨‹ç›¸ä¼¼.</p>
<p>è°ƒç”¨<code>layout</code>(å†³å®šç»˜åˆ¶æ–‡æœ¬å¤§å°)å, æˆ‘ä»¬å°†<code>position</code>å˜é‡è®¾ç½®ä¸ºæ–°çš„<code>Offset</code>, å…¶å€¼å°†ä½¿ç»˜åˆ¶æ–‡æœ¬çš„å³ä¾§ä½äºå±å¹•å³ä¾§è¾¹ç¼˜çº¦1/4å¤„, è€Œå…¶é¡¶éƒ¨ä½äºå±å¹•çš„å³è¾¹ç¼˜. ä¸å±å¹•é¡¶éƒ¨è¾¹ç¼˜çš„è·ç¦»ç›¸åŒ.</p>
  </blockquote>

<p>æˆ‘ä»¬é€šè¿‡ç¼–å†™<code>render</code>å‡½æ•°çš„å†…å®¹æ¥å®Œæˆè¯¥ç±»:</p>
<pre tabindex="0"><code>void render(Canvas c) {
  painter.paint(c, position);
}
</code></pre><p>æ²¡æœ‰å¤æ‚çš„ç‚¹, åªéœ€åœ¨<code>updateHighScore</code>å‡½æ•°ä¸­é¢„å…ˆè®¡ç®—çš„ä½ç½®å°†æœ€é«˜åˆ†ç»˜åˆ¶åˆ°å±å¹•ä¸Šå³å¯.</p>
<p>æ•´ä¸ª<code>HighscoreDisplay</code>ç±»æ–‡ä»¶:</p>
<pre tabindex="0"><code>import &#39;dart:ui&#39;;
import &#39;package:flutter/painting.dart&#39;;
import &#39;package:langaw/langaw-game.dart&#39;;

class HighscoreDisplay {
  final LangawGame game;
  TextPainter painter;
  TextStyle textStyle;
  Offset position;

  HighscoreDisplay(this.game) {
    painter = TextPainter(
      textAlign: TextAlign.center,
      textDirection: TextDirection.ltr,
    );

    Shadow shadow = Shadow(
      blurRadius: 3,
      color: Color(0xff000000),
      offset: Offset.zero,
    );

    textStyle = TextStyle(
      color: Color(0xffffffff),
      fontSize: 30,
      shadows: [shadow, shadow, shadow, shadow],
    );

    position = Offset.zero;

    updateHighscore();
  }

  void updateHighscore() {
    int highscore = game.storage.getInt(&#39;highscore&#39;) ?? 0;

    painter.text = TextSpan(
      text: &#39;High-score: &#39; + highscore.toString(),
      style: textStyle,
    );

    painter.layout();

    position = Offset(
      game.screenSize.width - (game.tileSize * .25) - painter.width,
      game.tileSize * .25,
    );
  }

  void render(Canvas c) {
    painter.paint(c, position);
  }
}
</code></pre><p>ç°åœ¨å°±å‰©æŠŠå®ƒæ·»åŠ è‡³gameç±»ä¸­äº†, æ‰“å¼€<code>./lib/langaw-game.dart</code>, å¯¼å…¥<code>HighscoreDisplay</code>:</p>
<pre tabindex="0"><code>import &#39;package:langaw/components/highscore-display.dart&#39;;
</code></pre><p>æ·»åŠ å®ä¾‹å˜é‡, ç±»å‹ä¸º<code>HighscoreDisplay</code>:</p>
<pre tabindex="0"><code>HighscoreDisplay highscoreDisplay;
</code></pre><p>åœ¨<code>initialize</code>å‡½æ•°å†…, åˆå§‹åŒ–<code>highscoreDisplay</code>(æœ€å¥½åœ¨<code>scoreDisplay</code>ä¸‹é¢):</p>
<pre tabindex="0"><code>highscoreDisplay = HighscoreDisplay(this);
</code></pre><p>æœ€ååœ¨<code>render</code>å†…, æ¸²æŸ“èƒŒæ™¯å(æ¸²æŸ“<code>scoreDisplay</code>å‰), ä½¿ç”¨ä»¥ä¸‹ä»£ç æ¸²æŸ“æœ€é«˜åˆ†:</p>
<pre tabindex="0"><code>highscoreDisplay.render(canvas);
</code></pre><p>å°è¯•è¿è¡Œæ¸¸æˆ, åº”è¯¥å¯ä»¥åœ¨å±å¹•å³ä¸Šè§’çœ‹åˆ°åˆ†æ•°æ˜¾ç¤º(ç›®å‰ä¸º0):</p>
<p><img src="images/05-2.png" alt=""></p>
<h4 id="æ›´æ–°æœ€é«˜åˆ†">æ›´æ–°æœ€é«˜åˆ†</h4>
<p>ç›®å‰çš„æœ€é«˜åˆ†æ˜¯æš‚æ—¶æ— æ•ˆçš„. åªè¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶, å°±éœ€è¦æ›´æ–°å®ƒ:</p>
<ol>
<li>ç©å®¶å½“å‰ç•Œé¢æ˜¯&quot;playing&quot;</li>
<li>å½“å‰åˆ†æ•°é«˜äºæœ€é«˜åˆ†</li>
</ol>
<p>ä¸ºæ­¤æˆ‘ä»¬æ‰“å¼€<code>./lib/components/fly.dart</code>. åœ¨<code>onTapDown</code>å¤„ç†å™¨ä¸­, æˆ‘å·²ç»æœ‰äº†ä¸€ä¸ª<code>if</code>å—, ç”¨äºåˆ¤æ–­å½“å‰ç•Œé¢æ˜¯å¦ä¸º&quot;playing&quot;.</p>
<p>åœ¨è¯¥å—å†…, æˆ‘ä»¬æ·»åŠ <code>1</code>åˆ†ä¸‹é¢, æ’å…¥ä»¥ä¸‹ä»£ç :</p>
<pre tabindex="0"><code>if (game.score &gt; (game.storage.getInt(&#39;highscore&#39;) ?? 0)) {
  game.storage.setInt(&#39;highscore&#39;, game.score);
  game.highscoreDisplay.updateHighscore();
}
</code></pre>


  <blockquote>
    <p>ğŸ’¡ ä»£ç è§£æ: æ­¤å—ä»…æ£€æŸ¥åˆ†æ•°æ˜¯å¦é«˜äºå½“å‰ä¿å­˜ä¸ºæœ€é«˜åˆ†çš„åˆ†æ•°. å› ä¸ºç»è¿‡<code>if</code>çš„åˆ¤æ–­, æˆ‘ä»¬å·²ç»çŸ¥é“ç©å®¶æ­£åœ¨&quot;playing&quot;.</p>
<p>å¦‚æœæ»¡è¶³æ¡ä»¶, åˆ™é¦–å…ˆè°ƒç”¨<code>setInt</code>å‡½æ•°, ä¼ é€’å­—ç¬¦ä¸²<code>highscore</code>å’Œæ–°å€¼. æ­¤å‡½æ•°å’Œ<code>getInt</code>ç±»ä¼¼, ä½†æ˜¯å®ƒä¼ é€’çš„æ˜¯å¼•ç”¨, è€Œä¸æ˜¯å®ƒçš„å€¼.</p>
<p>ä¹‹å, æˆ‘ä»¬æ‰‹åŠ¨æ›´æ–°<code>HighscoreDisplay</code>å®ä¾‹, ä»¥å‘ç©å®¶æ˜¾ç¤ºä»–çš„åˆ†æ•°æ˜¯å½“å‰æœ€é«˜åˆ†.</p>
  </blockquote>

<p>ä»£ç æˆªå›¾:</p>
<p><img src="images/06-2.png" alt=""></p>
<p>ğŸŸ¢ ç°åœ¨è¿è¡Œæ¸¸æˆ, ä½ åº”è¯¥ä¼šçœ‹åˆ°: æ¯æ¬¡è¶…è¿‡å½“å‰æœ€é«˜åˆ†, éƒ½ä¼šæ›´æ–°æœ€é«˜åˆ†. å¼€å¯ä¸‹ä¸€å±€æ¸¸æˆæ—¶, è¯¥æœ€é«˜åˆ†ä¼šè¢«ä¿ç•™. è¿™æ ·ä¼šä¸æ–­ä½¿ç©å®¶æŒ‘æˆ˜è‡ªå·±, æ‰“ç ´è®°å½•.</p>
<p><img src="images/07-2.png" alt=""></p>
<p><strong>ğŸ‘‰åœ¨<a href="https://github.com/HarrisonQi/flame-tutorial-langaw/tree/09ec49172b28ec5d7b3215816618bae6c4d4c133" target="_blank">Github</a>
æˆ–<a href="https://github.com/HarrisonQi/flame-tutorial-langaw/tree/09ec49172b28ec5d7b3215816618bae6c4d4c133" target="_blank">ç äº‘</a>
ä¸ŠæŸ¥çœ‹è¿™éƒ¨åˆ†çš„ä»£ç .</strong></p>
<h3 id="ç¬¬ä¸‰æ­¥-éŸ³æ•ˆ">ç¬¬ä¸‰æ­¥: éŸ³æ•ˆ</h3>
<p>ğŸŸ¡ æç¤º: Macå’ŒIOSè®¾å¤‡åœ¨æ’­æ”¾<code>.ogg</code>æ–‡ä»¶æ—¶å¯èƒ½å‡ºç°é—®é¢˜. å¦‚æœæ‚¨é‡åˆ°ç±»ä¼¼çš„æ’­æ”¾å¼‚å¸¸, è¯·ç”¨ä½ å–œæ¬¢çš„éŸ³é¢‘è½¬æ¢å·¥å…·å°†<code>.ogg</code>æ–‡ä»¶è½¬æ¢ä¸º<code>.mp3</code>æ–‡ä»¶. å¦å¤–ä¹Ÿè¯·æ³¨æ„è¦æŠŠå¯¹åº”çš„<code>.ogg</code>åç¼€æ”¹ä¸º<code>.mp3</code>.</p>
<p>ä¸€ä¸ªæ¸¸æˆæ²¡æœ‰éŸ³ä¹å°†ä¼šç›¸å½“å•è°ƒ. å¹¸è¿çš„æ˜¯, Flameå¯ä»¥å¾ˆè½»æ¾çš„ä¸ºæ¸¸æˆæ·»åŠ å£°éŸ³!ğŸ¤ªğŸ¤ª</p>
<p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªç›®å½•, ç”¨äºå­˜æ”¾éŸ³æ•ˆæ–‡ä»¶. åˆ›å»ºç›®å½•<code>./assets/audio/sfx</code>, å¹¶æŠŠèµ„æºåŒ…ä¸­<code>./audio/sfx</code>ç›®å½•ä¸‹å…¨éƒ¨æ–‡ä»¶æ”¾åœ¨åˆ›å»ºçš„ç›®å½•ä¸­:</p>
<pre tabindex="0"><code>./assets
./assets/audio
./assets/audio/sfx
./assets/audio/sfx/haha1.ogg
./assets/audio/sfx/haha2.ogg
./assets/audio/sfx/haha3.ogg
./assets/audio/sfx/haha4.ogg
./assets/audio/sfx/haha5.ogg
./assets/audio/sfx/ouch1.ogg
./assets/audio/sfx/ouch2.ogg
./assets/audio/sfx/ouch3.ogg
./assets/audio/sfx/ouch4.ogg
./assets/audio/sfx/ouch5.ogg
./assets/audio/sfx/ouch6.ogg
./assets/audio/sfx/ouch7.ogg
./assets/audio/sfx/ouch8.ogg
./assets/audio/sfx/ouch9.ogg
./assets/audio/sfx/ouch10.ogg
./assets/audio/sfx/ouch11.ogg
</code></pre><p>ä¸‹ä¸€æ­¥å°†å®ƒä»¬æ³¨å†Œè¿›å…¥Flutterä¸­, ç¼–è¯‘æ—¶å°†å®ƒä»¬æ‰“åŒ…è¿›å», åœ¨<code>./pubspec.yaml</code>çš„<code>assets</code>ä¸­æ·»åŠ :</p>
<pre tabindex="0"><code> assets:
    - assets/audio/sfx/haha1.ogg
    - assets/audio/sfx/haha2.ogg
    - assets/audio/sfx/haha3.ogg
    - assets/audio/sfx/haha4.ogg
    - assets/audio/sfx/haha5.ogg
    - assets/audio/sfx/ouch1.ogg
    - assets/audio/sfx/ouch2.ogg
    - assets/audio/sfx/ouch3.ogg
    - assets/audio/sfx/ouch4.ogg
    - assets/audio/sfx/ouch5.ogg
    - assets/audio/sfx/ouch6.ogg
    - assets/audio/sfx/ouch7.ogg
    - assets/audio/sfx/ouch8.ogg
    - assets/audio/sfx/ouch9.ogg
    - assets/audio/sfx/ouch10.ogg
    - assets/audio/sfx/ouch11.ogg
</code></pre><p>åŒæ ·çš„, ä¸€å®šè¦æ³¨æ„ç¼©è¿›.</p>
<p>ç„¶åè¿›å…¥<code>./lib/main.dart</code>, åœ¨<code>main</code>å‡½æ•°ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç è¡Œ:</p>
<pre tabindex="0"><code>Flame.audio.disableLog();
Flame.audio.loadAll([
  &#39;sfx/haha1.ogg&#39;,
  &#39;sfx/haha2.ogg&#39;,
  &#39;sfx/haha3.ogg&#39;,
  &#39;sfx/haha4.ogg&#39;,
  &#39;sfx/haha5.ogg&#39;,
  &#39;sfx/ouch1.ogg&#39;,
  &#39;sfx/ouch2.ogg&#39;,
  &#39;sfx/ouch3.ogg&#39;,
  &#39;sfx/ouch4.ogg&#39;,
  &#39;sfx/ouch5.ogg&#39;,
  &#39;sfx/ouch6.ogg&#39;,
  &#39;sfx/ouch7.ogg&#39;,
  &#39;sfx/ouch8.ogg&#39;,
  &#39;sfx/ouch9.ogg&#39;,
  &#39;sfx/ouch10.ogg&#39;,
  &#39;sfx/ouch11.ogg&#39;,
]);
</code></pre>


  <blockquote>
    <p>ğŸ’¡ ä»£ç è§£æ: ç¬¬ä¸€è¡Œç¦ç”¨äº†debugæ—¥å¿—, ä»¥å…åœ¨æ§åˆ¶å°ä¸­åˆ·å±.</p>
<p>æ¥ä¸‹æ¥çš„å‡ è¡Œå®é™…ä¸Šåªæœ‰ä¸€è¡Œ, ä¸€ä¸ªå‡½æ•°è°ƒç”¨çš„å‚æ•°ä¸ºæ•°ç»„. ä¸ºäº†ä¾¿äºé˜…è¯», æ•°ç»„è¢«å‚ç›´å±•å¼€. è¿™å°†é¢„åŠ è½½æ‰€æœ‰éŸ³æ•ˆæ–‡ä»¶, ä»¥ä¾¿å°†å®ƒä»¬ç¼“å­˜å¹¶éšæ—¶å¯è¢«æ¸¸æˆæ’­æ”¾.</p>
<p>ä½ å¯èƒ½æ³¨æ„åˆ°äº†, å’Œé¢„åŠ è½½å›¾ç‰‡çš„æ ¼å¼æ˜¯ä¸€è‡´çš„.</p>
  </blockquote>

<p>ä¸‹ä¸€æ­¥æ˜¯åœ¨é€‚å½“çš„ä½ç½®æ’­æ”¾å£°éŸ³.</p>
<p>æˆ‘ä»¬åŸºæœ¬ä¸Šæœ‰ä¸¤ç§å£°éŸ³æ•ˆæœ. ä¸€ç§æ˜¯**&ldquo;ouch&rdquo;<strong>(ç±»ä¼¼äºæƒ¨å«), å¦ä¸€ç§æ˜¯</strong>&ldquo;haha&rdquo;<strong>(å“ˆå“ˆç¬‘). å½“ç©å®¶å‡»è½å°é£è‡æ—¶, ä¼šæ’­æ”¾</strong>&ldquo;ouch&rdquo;<strong>, ç©å®¶æ‰“åçš„æ—¶å€™ä¼šæ’­æ”¾</strong>&ldquo;haha&rdquo;**.</p>
<p>ğŸ’¡ ä½ å¯èƒ½æƒ³çŸ¥é“ä¸ºä»€ä¹ˆæœ‰æ•´æ•´11ä¸ª**&ldquo;haha&rdquo;<strong>å’Œ5ä¸ª</strong>&ldquo;ouch&rdquo;**.</p>
<p>åœ¨è¿™é‡Œåˆ†äº«ä¸€ä¸ªæ¸¸æˆå¼€å‘ç§˜è¯€.</p>
<p>ä»»ä½•é‡å¤éƒ½æ˜¯æ— èŠçš„. æ¯”å¦‚ä¸€ä¸ªç¬‘è¯è®²äº†åæ¬¡å°±ä¸å†æ˜¯ç¬‘è¯äº†. ç”Ÿæ´»ä¸­å¤§å¤šæ•°äº‹æƒ…éƒ½æ˜¯é‡å¤çš„(å‘¼å¸ã€ æ—¥å­ä»¥åŠgame loop), ä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨æ’­æ”¾æ—¶ä½¿ç”¨å¤šä¸ªç‰ˆæœ¬çš„å£°éŸ³æ•ˆæœ, æ˜¯æ¸¸æˆçš„å£°éŸ³æ·»åŠ ä¸€äº›è¶£å‘³. å¦‚æœæˆ‘ä»¬æ¯æ¬¡å‡»æ€å°é£è‡æ—¶éƒ½æ’­æ”¾ç›¸åŒçš„å£°éŸ³, å®ƒå¯èƒ½ä¼šå¾ˆå¿«è¢«ç©å®¶ç©è…».</p>
<p>ä¸ºæ­¤, æ¯æ¬¡æˆ‘ä»¬éœ€è¦æ’­æ”¾å£°éŸ³æ—¶, å°±ä¼šä»<code>game</code>çš„<code>rnd</code>ä¸­è·å–ä¸€ä¸ªéšæœºæ•°, å¹¶æ’­æ”¾ç›¸åº”çš„&quot;ç›¸åŒ&quot;çš„éšæœºä¸€ç§éŸ³æ•ˆ.</p>
<p>æ‰“å¼€<code>./lib/components/fly.dart</code>, å¯¼å…¥Flame:</p>
<pre tabindex="0"><code>import &#39;package:flame/flame.dart&#39;;
</code></pre><p>ç„¶ååœ¨<code>onTapDown</code>å¤„ç†å™¨å, åœ¨åˆ¤æ–­è¢«ç‚¹å‡»çš„å°é£è‡æ²¡æœ‰æ­»çš„åé¢æ·»åŠ :</p>
<pre tabindex="0"><code>Flame.audio.play(&#39;sfx/ouch&#39; + (game.rnd.nextInt(11) + 1).toString() + &#39;.ogg&#39;);
</code></pre>


  <blockquote>
    <p>ğŸ’¡ ä»£ç è§£æ: è‹¥è¦è°ƒç”¨FlameéŸ³é¢‘åº“çš„<code>play</code>å‡½æ•°, åªéœ€è¦ä¼ å…¥éŸ³é¢‘æ–‡ä»¶å.</p>
<p>è¯¦ç»†ä»‹ç»ä¸€ä¸‹éšæœºç”Ÿæˆå™¨: <code>(game.rnd.nextInt(11) + 1)</code>. å‡½æ•°<code>nextInt()</code>æ¥æ”¶ä¸€ä¸ªæ•´æ•°ä½œä¸ºå‚æ•°, å¹¶è¿”å›ä¸€ä¸ªä»0åˆ°æ‰€ä¼ å‚æ•°(ä¸åŒ…å«)çš„éšæœºå€¼çš„æ•´æ•°. å› æ­¤è‹¥ä¼ é€’11, åˆ™å¯ä»¥å¾—åˆ°<code>0</code>åˆ°<code>10</code>ä¹‹é—´çš„ä»»æ„æ•°å­—. ç„¶åå°†å…¶åŠ 1, ä½¿è¿”å›çš„æ•°å­—å˜ä¸ºä»<code>1</code>åˆ°<code>11</code>, è¿™æ ·åˆšå¥½åŒ¹é…æˆ‘ä»¬çš„æ–‡ä»¶å(<code>ouch1.ogg</code>, <code>ouch2.ogg</code>, â€¦, <code>ouch11.ogg</code>).</p>
  </blockquote>

<p>ğŸŸ¢ è¿è¡Œæ¸¸æˆ, ä½ ä¼šå‘ç°å‡»è½å°é£è‡å, å°é£è‡ä¼šå‘å‡ºå£°éŸ³.</p>
<p>æ‰“å¼€<code>./lib/langaw-game.dart</code>, ä¿®æ”¹<code>if</code>å—çš„ä»£ç , è¯¥ä»£ç åˆ¤æ–­ç©å®¶æ˜¯å¦&quot;æ­£åœ¨ç©æ¸¸æˆ&quot;å¹¶ä¸”ç‚¹å‡»ä½†æœªå‡»ä¸­å°é£è‡.<br>
æ‰¾åˆ°:</p>
<pre tabindex="0"><code>if (activeView == View.playing &amp;&amp; !didHitAFly) {
  activeView = View.lost;
}
</code></pre><p>æ”¹ä¸º</p>
<pre tabindex="0"><code>if (activeView == View.playing &amp;&amp; !didHitAFly) {
  Flame.audio.play(&#39;sfx/haha&#39; + (rnd.nextInt(5) + 1).toString() + &#39;.ogg&#39;);
  activeView = View.lost;
}
</code></pre>


  <blockquote>
    <p>ğŸ’¡ ä»£ç è§£æ: æˆ‘ä»¬åŒæ ·è°ƒç”¨äº†<code>play</code>å‡½æ•°, ä½†æ˜¯æ’­æ”¾çš„æ˜¯5ä¸ª<code>haha</code>çš„å˜ä½“.</p>
  </blockquote>

<p>æˆ‘ä»¬è¿˜æœ‰å¦ä¸€ç§å¤±è´¥æ¡ä»¶, æ‰€ä»¥æ‰“å¼€<code>./lib/components/callout.dart</code>, å¯¼å…¥:</p>
<pre tabindex="0"><code>import &#39;package:flame/flame.dart&#39;;
</code></pre><p>åœ¨<code>update()</code>å†…éƒ¨, ä¿®æ”¹<code>if</code>å—, è¯¥å—åˆ¤æ–­<code>value</code>æ˜¯å¦å°äºç­‰äº0:</p>
<p>æ‰¾åˆ°:</p>
<pre tabindex="0"><code>if (value &lt;= 0) {
  fly.game.activeView = View.lost;
}
</code></pre><p>æ”¹ä¸º:</p>
<pre tabindex="0"><code>if (value &lt;= 0) {
  Flame.audio.play(&#39;sfx/haha&#39; + (fly.game.rnd.nextInt(5) + 1).toString() + &#39;.ogg&#39;);
  fly.game.activeView = View.lost;
}
</code></pre>


  <blockquote>
    <p>ğŸ’¡ ä»£ç è§£æ: ä¸ä¸Šé¢çš„ä»£ç åŸºæœ¬ç›¸åŒ, åªæ˜¯è®¿é—®gameçš„<code>rnd</code>å¯¹è±¡çš„æ–¹å¼ä¸åŒ. åœ¨æ­¤ç±»ä¸­, æˆ‘ä»¬æ²¡æœ‰ç›´æ¥å¼•ç”¨gameå®ä¾‹. æˆ‘ä»¬å…ˆé€šè¿‡<code>fly</code>å¼•ç”¨, ç„¶åå†é€šè¿‡<code>fly</code>çš„<code>game</code>è¿›è¡Œå¼•ç”¨, ç„¶åå†è½¬åˆ°<code>rnd</code>å¯¹è±¡.</p>
  </blockquote>

<p>ğŸŸ¢ å°è¯•è¿è¡Œæ¸¸æˆ, çœ‹çœ‹æ•ˆæœ!</p>
<p><strong>ğŸ‘‰åœ¨<a href="https://github.com/HarrisonQi/flame-tutorial-langaw/tree/ad2d571fb9b5db4bb8e77434c4e0c101b101f0df" target="_blank">Github</a>
æˆ–<a href="https://github.com/HarrisonQi/flame-tutorial-langaw/tree/ad2d571fb9b5db4bb8e77434c4e0c101b101f0df" target="_blank">ç äº‘</a>
ä¸ŠæŸ¥çœ‹è¿™éƒ¨åˆ†çš„ä»£ç .</strong></p>
<h3 id="ç¬¬å››æ­¥-èƒŒæ™¯éŸ³ä¹">ç¬¬å››æ­¥: èƒŒæ™¯éŸ³ä¹</h3>
<p>æ˜¯æ—¶å€™æ·»åŠ BGM(èƒŒæ™¯éŸ³ä¹)äº†!</p>
<p>èƒŒæ™¯éŸ³ä¹å†³å®šäº†æ¸¸æˆçš„æ°”æ°›æˆ–è€…ç©å®¶å½“å‰çš„ç•Œé¢. å¯¹äºæ­¤æ¸¸æˆ, æˆ‘ä»¬å°†ä¼šæœ‰ä¸¤ç§ä¸åŒçš„èƒŒæ™¯éŸ³ä¹, ä¸€ç§ç”¨äºplayç•Œé¢, å¦ä¸€ç§ç”¨äºå…¶ä»–.</p>
<p>é¦–å…ˆ, å°†èµ„æºåŒ…çš„<code>./audio/bgm</code>å†…çš„æ–‡ä»¶å¤åˆ¶åˆ°æ¸¸æˆç›®å½•ä¸­çš„<code>./lib/assets/audio/bgm</code>ä¸­, ç»“æ„å¦‚ä¸‹:</p>
<pre tabindex="0"><code>./assets
./assets/audio
./assets/audio/bgm
./assets/audio/bgm/home.mp3
./assets/audio/bgm/playing.mp3
</code></pre><p>è¿™äº›æ–‡ä»¶ä¹ŸåŒæ ·è¦ç»‘å®šè‡³åŒ…ä¸­, æ‰€ä»¥æŠŠå®ƒä»¬åŠ åœ¨<code>./pubspec.yaml</code>èµ„æºä¸­:</p>
<pre tabindex="0"><code>  assets:
    - assets/audio/bgm/home.mp3
    - assets/audio/bgm/playing.mp3
    - assets/audio/sfx/haha1.ogg
</code></pre><p>BGMå°†ä¼šè¢«å¾ªç¯æ’­æ”¾, å› æ­¤æˆ‘ä»¬ä½¿å®ƒä»¬é¢„åŠ è½½. æ‰“å¼€<code>./lib/main.dart</code>, å¹¶å°†BGMæ–‡ä»¶åŒ…å«åœ¨ä¼ å…¥<code>Flame.audio.loadAll</code>çš„æ•°ç»„ä¸­:</p>
<pre tabindex="0"><code>Flame.audio.loadAll([
  &#39;bgm/home.mp3&#39;,
  &#39;bgm/playing.mp3&#39;,
  &#39;sfx/haha1.ogg&#39;,
</code></pre><p>ä½¿ç”¨SFX(éŸ³æ•ˆ), æˆ‘ä»¬å¯ä»¥åªæ’­æ”¾ä»–ä»¬å°±æ”¾æ‰‹ä¸ç®¡, å› ä¸ºä»–ä»¬çŸ­ä¸”åªæœ‰ä¸€æ¬¡. å¯¹äºBGM, æˆ‘ä»¬éœ€è¦å¯ä»¥å¯¹å®ƒä»¬è¿›è¡Œæ§åˆ¶, æ¯”å¦‚æš‚åœã€ç»§ç»­æ’­æ”¾å’Œæœç´¢.</p>
<p>æˆ‘ä»¬å°†å­˜å‚¨è¿™äº›å¼•ç”¨, ä¿ç•™åœ¨gameç±»çš„å˜é‡, å› æ­¤æˆ‘ä»¬æ‰“å¼€<code>./lib/langaw-game.dart</code>.</p>
<p>é¦–å…ˆ, æˆ‘ä»¬éœ€è¦è®¿é—®<code>AudioPlayer</code>, å› æ­¤å¯¼å…¥:</p>
<pre tabindex="0"><code>import &#39;package:audioplayers/audioplayers.dart&#39;;
</code></pre><p>ä¸‹ä¸€æ­¥, æˆ‘ä»¬éœ€è¦å®ä¾‹å˜é‡, è¯¥å˜é‡å°†ä¿å­˜æ¯ä¸ªBGMå¯¹éŸ³é¢‘æ’­æ”¾å™¨çš„å¼•ç”¨:</p>
<pre tabindex="0"><code>AudioPlayer homeBGM;
AudioPlayer playingBGM;
</code></pre><p>åœ¨<code>initialize()</code>ä¸­çš„æœ«å°¾, æˆ‘ä»¬æ·»åŠ ä»¥ä¸‹ä»£ç å—åˆå§‹åŒ–è¿™äº›å˜é‡, æš‚åœæ’­æ”¾å¹¶æ’­æ”¾ä¸»é¡µBGM:</p>
<pre tabindex="0"><code>homeBGM = await Flame.audio.loop(&#39;bgm/home.mp3&#39;, volume: .25);
homeBGM.pause();
playingBGM = await Flame.audio.loop(&#39;bgm/playing.mp3&#39;, volume: .25);
playingBGM.pause();

playHomeBGM();
</code></pre>


  <blockquote>
    <p>ğŸ’¡ ä»£ç è§£æ: ç¬¬ä¸€è¡Œè·å–ä¸€ä¸ª<code>AudioPlayer</code>çš„å®ä¾‹, è¯¥å®ä¾‹åŠ è½½äº†ä¼ é€’çš„æ–‡ä»¶å. æˆ‘ä»¬ä½¿ç”¨<code>loop</code>å‡½æ•°, å› æ­¤å®ƒå°†ç«‹å³å¼€å§‹æ’­æ”¾BGM. æˆ‘ä»¬é€šè¿‡ä¸‹é¢çš„<code>homeBGM.pause()</code>æ¥å–æ¶ˆè¯¥æ•ˆæœ.</p>
<p>ä½ å¯èƒ½ä¼šæ³¨æ„åˆ°æˆ‘ä»¬å°†éŸ³é‡è®¾ç½®ä¸º0.25, è¿™æ˜¯å…¶åŸå§‹éŸ³é‡çš„1/4. è‹¥èƒŒæ™¯éŸ³ä¹å£°éŸ³è¿‡å¤§, å°†ä¼šç›–ä½å…¶ä»–çš„æ›´é‡è¦çš„ä¸œè¥¿. ä½ å¯ä»¥éšæ—¶ä½¿ç”¨è¯¥å€¼, æœ‰æ•ˆå€¼ä¸ºä»<code>0</code>(é™éŸ³)åˆ°<code>1</code>(æœ€å¤§éŸ³é‡).</p>
<p>æ¥ä¸‹æ¥ä¸¤è¡ŒåšåŒæ ·çš„äº‹, é’ˆå¯¹äºæ­£åœ¨æ’­æ”¾çš„BGM.</p>
<p>æœ€å, æˆ‘ä»¬è°ƒç”¨<code>playHomeBGM()</code>(è¿˜æ²¡å¼€å§‹å†™)æ¥æ’­æ”¾homeçš„BGM</p>
  </blockquote>

<p>ğŸŸ¡ æç¤º: å¦‚æœä½ ä½¿ç”¨çš„æ˜¯æ–°ç‰ˆæœ¬çš„Flame(æ¯”å¦‚<code>0.11.0</code>), ä½ ä¼šéœ€è¦ä½¿ç”¨<code>loopLongAudio</code>æ¥ä»£æ›¿<code>loop</code>, å¹¶ä¸”æ›¿æ¢æ‰å…¶ä»–éœ€è¦ç”¨åˆ°<code>loop</code>çš„å‡½æ•°.</p>
<p>ä¹Ÿæ¬¢è¿æ¥çœ‹ä¸€ä¸‹<a href="https://jap.alekhin.io/scoring-storage-sound-tutorial-flame-flutter-part-4" target="_blank">æ–°çš„ç®¡ç†åŠæ’­æ”¾èƒŒæ™¯éŸ³ä¹æ•™ç¨‹</a>
</p>
<p>ç°åœ¨æ¥å†™<code>playHomeBGM()</code>:</p>
<pre tabindex="0"><code>void playHomeBGM() {
  playingBGM.pause();
  playingBGM.seek(Duration.zero);
  homeBGM.resume();
}

void playPlayingBGM() {
  homeBGM.pause();
  homeBGM.seek(Duration.zero);
  playingBGM.resume();
}
</code></pre>


  <blockquote>
    <p>ğŸ’¡ ä»£ç è§£æ: è¿™ä¸¤ä¸ªå‡½æ•°åšäº†ç±»ä¼¼çš„äº‹æƒ…, ä½†ä¸€ç§æ˜¯ç”¨äºhomeçš„BGM, å¦ä¸€ç§ç”¨äºplayingçš„BGM. å®ƒä»¬åŸºæœ¬ä¸Šæ˜¯å¯¹ç«‹çš„.</p>
<p>ä½¿ç”¨<code>playHomeBGM</code>, æˆ‘ä»¬æš‚åœ<code>playBGM</code>, å¹¶å°†å…¶æ’­æ”¾ä½ç½®è®¾ä¸ºä»å¤´å¼€å§‹(<code>Duration.zero</code>). å¦ä¸€æ–¹é¢, <code>playPlayingBGM</code>åšäº†ç±»ä¼¼çš„äº‹æƒ…, åªæ˜¯æŠŠ<code>homeBGM</code>å’Œ<code>playBGM</code>è¿›è¡Œäº¤æ¢.</p>
  </blockquote>

<p>æ¯å½“ç©å®¶è¾“æ‰æ¯”èµ›æ—¶, æˆ‘ä»¬éƒ½åº”è¯¥è¿”å›åˆ°<code>homeBGM</code>, å› æ­¤åœ¨<code>onTapDown</code>å¤„ç†å™¨å’Œæœªå‘½ä¸­æƒ…å†µä¸‹(æ’­æ”¾&quot;haha&quot;çš„SFXä¸‹é¢), æ·»åŠ ä»¥ä¸‹è¡Œç”¨äºæš‚åœé‡ç½®<code>playBGM</code>å¹¶æ’­æ”¾<code>homeBGM</code>:</p>
<pre tabindex="0"><code>playHomeBGM();
</code></pre><p>ç„¶åç«‹åˆ»å›åˆ°<code>./lib/components/callout.dart</code>, åœ¨æ¸¸æˆå¤±è´¥æ¡ä»¶(æ£€æŸ¥å€¼æ˜¯å¦å°äº0çš„<code>if</code>å—)ä¸­, &ldquo;haha&quot;SFXçš„ä¸‹æ–¹æ·»åŠ :</p>
<pre tabindex="0"><code>fly.game.playHomeBGM();
</code></pre><p>æœ€åä¸€æ­¥, æˆ‘ä»¬è¦åœ¨å¼€å§‹æ¸¸æˆæ—¶æ’­æ”¾&quot;playing&quot;çš„BGM, å› æ­¤æ‰“å¼€<code>./lib/components/start-button.dart</code>, å¹¶åœ¨<code>inTapDown</code>å‡½æ•°çš„æœ«å°¾æ·»åŠ :</p>
<pre tabindex="0"><code>game.playPlayingBGM();
</code></pre><p>ğŸŸ¢ è¿è¡Œæ¸¸æˆ, å¬ä¸€ä¸‹æˆ‘ä»¬åˆšåˆšåŠ å…¥çš„èƒŒæ™¯éŸ³ä¹å§!</p>



  <blockquote>
    <p>ğŸŸ¡ æç¤º: å¦‚æœå‡ºç°éŸ³ä¹æ’­æ”¾å¼‚å¸¸, å…ˆæ£€æŸ¥ä»£ç æ˜¯å¦æœ‰è¯¯.</p>
<p>è‹¥ä¿è¯ä»£ç æ— è¯¯, å¯ä»¥å°è¯•ä¸€ä¸‹æ¸…ç†ç¼“å­˜ã€é‡æ–°å®‰è£…æ¸¸æˆè‡³è™šæ‹Ÿæœº. æœ‰å…³æ¸…ç†Flutterç¼“å­˜, æ¬¢è¿æŸ¥çœ‹è¿™ç¯‡<a href="https://www.bugcatt.com/archives/881" target="_blank">ã€ŠFlutter æ¸…ç†ç¼–è¯‘ç¼“å­˜ã€‹</a>
</p>
  </blockquote>

<p><strong>ğŸ‘‰åœ¨<a href="https://github.com/HarrisonQi/flame-tutorial-langaw/tree/87b114b4e9bed58df986fdfbe0dd64e1fa1fd9e3" target="_blank">Github</a>
æˆ–<a href="https://github.com/HarrisonQi/flame-tutorial-langaw/tree/87b114b4e9bed58df986fdfbe0dd64e1fa1fd9e3" target="_blank">ç äº‘</a>
ä¸ŠæŸ¥çœ‹è¿™éƒ¨åˆ†çš„ä»£ç .</strong></p>
<h3 id="ç¬¬äº”æ­¥-æ§åˆ¶bgm-å’Œ-sfx">ç¬¬äº”æ­¥: æ§åˆ¶BGM å’Œ SFX</h3>
<p>æ¸¸æˆä¸­åŒ…å«éŸ³ä¹å’ŒéŸ³æ•ˆé€šå¸¸ä½“éªŒä¸é”™, ä½†æˆ‘ä»¬ä¹Ÿéœ€è¦è€ƒè™‘ç‰¹æ®Šæƒ…å†µ. æœ‰æ—¶ç©å®¶åªæƒ³å®‰é™çš„ç©æ¸¸æˆğŸ¤ğŸ¤.</p>
<p>ä¸ºæ­¤, æˆ‘ä»¬å°†ä¸ºç©å®¶æä¾›ä¸¤ä¸ªå¼€å…³æŒ‰é’®, ä¸€ä¸ªç”¨äºå¼€å¯/å±è”½éŸ³ä¹, å¦ä¸€ä¸ªæ¥å¼€å¯/å±è”½éŸ³æ•ˆ.</p>
<h4 id="å¼€å…³æŒ‰é’®">å¼€å…³æŒ‰é’®</h4>
<p>æˆ‘ä»¬å°†è¦åšçš„ä¸¤ä¸ªæŒ‰é’®åˆ†åˆ«æœ‰ä¸¤ç§çŠ¶æ€: å¯ç”¨/ç¦ç”¨. æˆ‘ä»¬å·²ç»åœ¨èµ„æºåŒ…ä¸­æä¾›äº†ä¸¤ç§(4ä¸ª)å›¾ç‰‡.</p>
<p>è®©æˆ‘ä»¬å°†å…¶ä½™çš„å›¾æ ‡ä»èµ„æºåŒ…çš„<code>./images/ui/</code>å¤åˆ¶åˆ°<code>./assets/images/ui/</code>çš„assetsç›®å½•, æ–‡ä»¶ç»“æ„å¦‚ä¸‹:</p>
<pre tabindex="0"><code>./assets
./assets/images
./assets/images/ui
./assets/images/ui/icon-music-disabled.png
./assets/images/ui/icon-music-enabled.png
./assets/images/ui/icon-sound-disabled.png
./assets/images/ui/icon-sound-enabled.png
</code></pre><p>å°±åƒå…¶ä»–æ‰€æœ‰èµ„æºæ–‡ä»¶ä¸€æ ·, æˆ‘ä»¬éœ€è¦å°†è¿™äº›æ–‡ä»¶æ·»åŠ è‡³<code>./pubspec.yaml</code>çš„<code>assets</code>ä¸­, ä½¿FlutterçŸ¥é“æˆ‘ä»¬éœ€è¦å°†è¿™äº›æ–‡ä»¶æ‰“åœ¨åŒ…ä¸­:</p>
<pre tabindex="0"><code>    - assets/images/ui/icon-music-disabled.png
    - assets/images/ui/icon-music-enabled.png
    - assets/images/ui/icon-sound-disabled.png
    - assets/images/ui/icon-sound-enabled.png
</code></pre>


  <blockquote>
    <p>ğŸ”´ æ³¨æ„: å¯èƒ½æ˜¯åŸä½œè€…çš„å¿™ä¸­å‡ºé”™, æ£€æŸ¥èµ„æºåŒ…ä¸­çš„<code>icon-sound enabled.png</code>æ–‡ä»¶, è‹¥æœ‰è¯¯åˆ™éœ€è¦é‡å‘½åä¸º<code>icon-sound-enabled.png</code>!</p>
  </blockquote>

<p>æ‰“å¼€<code>./lib/main.dart</code>æ¥é¢„åŠ è½½è¿™äº›å›¾æ ‡. åœ¨<code>Flame.images.loadAll</code>è°ƒç”¨çš„æ•°ç»„ä¸­æ·»åŠ :</p>
<pre tabindex="0"><code>&#39;ui/icon-music-disabled.png&#39;,
&#39;ui/icon-music-enabled.png&#39;,
&#39;ui/icon-sound-disabled.png&#39;,
&#39;ui/icon-sound-enabled.png&#39;,
</code></pre><p>ç°åœ¨, æˆ‘ä»¬å°†åˆ›å»ºæŒ‰é’®å¹¶å°†å…¶æ·»åŠ åˆ°gameç±»ä¸­. è¿™äº›æŒ‰é’®ä¸&quot;å¸®åŠ©&quot;å’Œ&quot;æ„Ÿè°¢&quot;æŒ‰é’®ç›¸ä¼¼.</p>
<p>åˆ›å»º<code>./lib/components/music-button.dart</code>:</p>
<pre tabindex="0"><code>import &#39;dart:ui&#39;;
import &#39;package:flame/sprite.dart&#39;;
import &#39;package:langaw/langaw-game.dart&#39;;

class MusicButton {
  final LangawGame game;
  Rect rect;
  Sprite enabledSprite;
  Sprite disabledSprite;
  bool isEnabled = true;

  MusicButton(this.game) {
    rect = Rect.fromLTWH(
      game.tileSize * .25,
      game.tileSize * .25,
      game.tileSize,
      game.tileSize,
    );
    enabledSprite = Sprite(&#39;ui/icon-music-enabled.png&#39;);
    disabledSprite = Sprite(&#39;ui/icon-music-disabled.png&#39;);
  }

  void render(Canvas c) {
    if (isEnabled) {
      enabledSprite.renderRect(c, rect);
    } else {
      disabledSprite.renderRect(c, rect);
    }
  }

  void onTapDown() {
    if (isEnabled) {
      isEnabled = false;
      game.homeBGM.setVolume(0);
      game.playingBGM.setVolume(0);
    } else {
      isEnabled = true;
      game.homeBGM.setVolume(.25);
      game.playingBGM.setVolume(.25);
    }
  }
}
</code></pre>


  <blockquote>
    <p>ğŸ’¡ ä»£ç è§£æ: ç”±äºå®ƒå’Œ&quot;å¸®åŠ©&quot;ä»¥åŠ&quot;æ„Ÿè°¢&quot;æŒ‰é’®éå¸¸ç›¸ä¼¼, æ‰€ä»¥é‡ç‚¹è®²ä¸€ä¸‹å®ƒä»¬çš„ä¸åŒä¹‹å¤„.</p>
<p>æˆ‘ä»¬ä¸æ˜¯1ä¸ª<code>sprite</code>å˜é‡æ¥å­˜å‚¨æŒ‰é’®çš„sprite. è€Œæ˜¯ä¸¤ä¸ª, ä¸€ä¸ªä¿å­˜å¯ç”¨çŠ¶æ€çš„sprite, å¦ä¸€ä¸ªåˆ™æ˜¯ç¦ç”¨çŠ¶æ€çš„sprite. è¯¥æŒ‰é’®åœ¨å±å¹•çš„å·¦ä¸Šè§’, å…¶å·¦è¾¹ç¼˜å’Œé¡¶éƒ¨è¾¹ç¼˜åˆ†åˆ«åœ¨å±å¹•çš„å·¦è¾¹å’Œé¡¶éƒ¨è¾¹ç¼˜çš„1/4çš„ä½ç½®.</p>
<p>æˆ‘ä»¬è¿˜æœ‰å¦ä¸€ä¸ªåä¸º<code>isEnabled</code>çš„å˜é‡, å®ƒæ˜¯ä¸€ä¸ªå¸ƒå°”å€¼, è¡¨ç¤ºå®ƒå¯ä»¥åŒ…å«<code>true</code>å’Œ<code>false</code>. é€šè¿‡æ“çºµæ­¤å˜é‡æ¥åˆ‡æ¢æŒ‰é’®çš„çŠ¶æ€, å¹¶æ¸²æŸ“é€‚å½“çš„sprite, ä½ å¯ä»¥åœ¨<code>render()</code>å†…éƒ¨çœ‹åˆ°.</p>
<p>ä¸è¿‡, æœ€é‡è¦çš„åŒºåˆ«æ˜¯<code>onTapDown</code>å¤„ç†å™¨. æœ‰ä¸€ä¸ªç”¨äºæ£€æŸ¥<code>isEnabled</code>æ˜¯å¦ä¸º<code>true</code>çš„<code>if</code>å—. è‹¥ä¸º<code>true</code>, åˆ™å°†å€¼æ”¹ä¸º<code>false</code>, å¹¶ä¸”<code>homeBGM</code>å’Œ<code>playingBGM</code>çš„éŸ³é‡(åœ¨<code>game</code>å®ä¾‹ä¸­)è®¾ä¸º0. è‹¥<code>isEnabled</code>ä¸º<code>false</code>, åˆ™å°†å€¼æ”¹ä¸º<code>true</code>, å¹¶å°†ä¸¤ä¸ªBGMçš„éŸ³é‡è®¾ç½®ä¸º<code>0.25</code>(åˆå§‹å€¼).</p>
  </blockquote>

<p>è®©æˆ‘ä»¬æ¥å†™å¦ä¸€ä¸ªæ§åˆ¶æŒ‰é’®, åˆ›å»ºæ–‡ä»¶<code>./lib/components/sound-button.dart</code>, :</p>
<pre tabindex="0"><code>import &#39;dart:ui&#39;;
import &#39;package:flame/sprite.dart&#39;;
import &#39;package:langaw/langaw-game.dart&#39;;

class SoundButton {
  final LangawGame game;
  Rect rect;
  Sprite enabledSprite;
  Sprite disabledSprite;
  bool isEnabled = true;

  SoundButton(this.game) {
    rect = Rect.fromLTWH(
      game.tileSize * 1.5,
      game.tileSize * .25,
      game.tileSize,
      game.tileSize,
    );
    enabledSprite = Sprite(&#39;ui/icon-sound-enabled.png&#39;);
    disabledSprite = Sprite(&#39;ui/icon-sound-disabled.png&#39;);
  }

  void render(Canvas c) {
    if (isEnabled) {
      enabledSprite.renderRect(c, rect);
    } else {
      disabledSprite.renderRect(c, rect);
    }
  }

  void onTapDown() {
    isEnabled = !isEnabled;
  }
}
</code></pre>


  <blockquote>
    <p>ğŸ’¡ ä»£ç è§£æ: ä½ åº”è¯¥èƒ½æ³¨æ„åˆ°, å®ƒå‡ ä¹å’Œ<code>MusicButton</code>å®Œå…¨ä¸€è‡´, å…¶ä½ç½®åœ¨å±å¹•çš„å·¦ä¸Šè§’, ä½†ä½ç½®ç¨å¾®åå³. å¦å¤–, <code>onTapDown</code>å¤„ç†å™¨åªæ˜¯å¸ƒå°”å€¼çš„ç®€å•åˆ‡æ¢. è¿™æ˜¯å› ä¸ºéŸ³æ•ˆæ¯”è¾ƒçŸ­, æ— éœ€ä½¿å®ƒé™éŸ³.</p>
  </blockquote>

<p>ä¸ºäº†å°†è¿™äº›æŒ‰é’®æ˜¾ç¤ºåœ¨æ¸¸æˆä¸­, æˆ‘ä»¬éœ€è¦å°†å®ƒä»¬æ·»åŠ è‡³gameç±»ä¸­. æ‰“å¼€<code>./lib/langaw-game.dart</code>, å¯¼å…¥åˆšåˆšåˆ›å»ºçš„æŒ‰é’®:</p>
<pre tabindex="0"><code>import &#39;package:langaw/components/music-button.dart&#39;;
import &#39;package:langaw/components/sound-button.dart&#39;;
</code></pre><p>ç„¶ååˆ›å»ºæŒ‰é’®çš„å®ä¾‹å˜é‡:</p>
<pre tabindex="0"><code>MusicButton musicButton;
SoundButton soundButton;
</code></pre><p>æˆ‘ä»¬éœ€è¦åœ¨<code>initialize()</code>ä¸­åˆå§‹åŒ–è¿™äº›æŒ‰é’®, æœ€å¥½åœ¨&quot;å¸®åŠ©&quot;å’Œ&quot;æ„Ÿè°¢&quot;æŒ‰é’®ä¸‹æ–¹:</p>
<pre tabindex="0"><code>musicButton = MusicButton(this);
soundButton = SoundButton(this);
</code></pre><p>æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦ä»gameç±»çš„<code>render()</code>ä¸­è°ƒç”¨æŒ‰é’®çš„<code>render()</code>å‡½æ•°. åœ¨æœ€ä¸Šé¢æ˜¾ç¤ºè¿™äº›æŒ‰é’®(ä½†åœ¨å¯¹è¯æ¡†ä¸‹é¢), ä»¥ä¾¿åœ¨æ¸¸æˆè¿‡ç¨‹ä¸­ä»»ä½•æ—¶å€™éƒ½å¯ç”¨(é™¤äº†&quot;å¸®åŠ©&quot;å’Œ&quot;æ„Ÿè°¢&quot;å¼¹æ¡†åœ¨å±å¹•ä¸Šæ—¶):</p>
<pre tabindex="0"><code>musicButton.render(canvas);
soundButton.render(canvas);
</code></pre><p>æœ€å, æˆ‘ä»¬éœ€è¦å°†ç‚¹å‡»äº‹ä»¶è½¬å‘åˆ°æŒ‰é’®çš„<code>onTapDown</code>å¤„ç†å™¨. è¯·è®°ä½, æœ€ä¸Šé¢çš„å¯¹è±¡åº”è¯¥é¦–å…ˆæ¥æ”¶ç‚¹å‡»äº‹ä»¶. ç”±äºæˆ‘ä»¬çš„æŒ‰é’®å°†ä½äºå¼¹æ¡†çš„åé¢, å› æ­¤è¿™äº›æŒ‰é’®çš„ç‚¹å‡»åˆ¤æ–­åº”åœ¨å¼¹æ¡†çš„ç‚¹å‡»å¤„ç†å™¨çš„ä¸‹æ–¹:</p>
<pre tabindex="0"><code>// éŸ³ä¹æŒ‰é’®
if (!isHandled &amp;&amp; musicButton.rect.contains(d.globalPosition)) {
  musicButton.onTapDown();
  isHandled = true;
}

// éŸ³æ•ˆæŒ‰é’®
if (!isHandled &amp;&amp; soundButton.rect.contains(d.globalPosition)) {
  soundButton.onTapDown();
  isHandled = true;
}
</code></pre><p><code>MusicButton</code>å·²ç»åœ¨å¤„ç†BGMçš„éŸ³é‡äº†. ç°åœ¨å”¯ä¸€ç¼ºå°‘çš„å°±æ˜¯è®©<code>SoundButton</code>çš„çŠ¶æ€å½±å“å®é™…çš„SFX.</p>
<p>æˆ‘ä»¬è¦åšçš„æ˜¯åœ¨å°è¯•æ’­æ”¾éŸ³æ•ˆä¹‹å‰æ£€æŸ¥å£°éŸ³æŒ‰é’®çš„çŠ¶æ€. å°†&quot;æ’­æ”¾&quot;çš„è°ƒç”¨é€»è¾‘æ”¾åœ¨<code>if</code>å—ä¸­, å°±å¯ä»¥å®ç°è¿™ä¸ªéœ€æ±‚, è¯¥å—åˆ¤æ–­<code>soundButton</code>çš„<code>isEnabled</code>å±æ€§æ˜¯å¦ä¸º<code>true</code>.</p>
<p>æˆ‘ä»¬éœ€è¦æ›´æ”¹ä¸‰ä¸ªä½ç½®æ¥å®ç°è¿™ä¸ªåŠŸèƒ½, é¦–å…ˆæ‰“å¼€<code>./lib/langaw-game.dart</code>, <code>onTapDown</code>å†…éƒ¨.<br>
æ›¿æ¢:</p>
<pre tabindex="0"><code>Flame.audio.play(&#39;sfx/haha&#39; + (rnd.nextInt(5) + 1).toString() + &#39;.ogg&#39;);
</code></pre><p>ä¸º:</p>
<pre tabindex="0"><code>if (soundButton.isEnabled) {
  Flame.audio.play(&#39;sfx/haha&#39; + (rnd.nextInt(5) + 1).toString() + &#39;.ogg&#39;);
}
</code></pre><p>ç¬¬äºŒæ­¥, æ‰“å¼€<code>./lib/components/callout.dart</code>, åœ¨<code>update()</code>å†…éƒ¨.<br>
æ›¿æ¢:</p>
<pre tabindex="0"><code>Flame.audio.play(&#39;sfx/haha&#39; + (fly.game.rnd.nextInt(5) + 1).toString() + &#39;.ogg&#39;);
</code></pre><p>ä¸º:</p>
<pre tabindex="0"><code>if (fly.game.soundButton.isEnabled) {
  Flame.audio.play(&#39;sfx/haha&#39; + (fly.game.rnd.nextInt(5) + 1).toString() + &#39;.ogg&#39;);
}
</code></pre><p>æœ€å, æ‰“å¼€<code>./lib/components/fly.dart</code>, åœ¨<code>onTapDown()</code>å†…éƒ¨.<br>
æ›¿æ¢:</p>
<pre tabindex="0"><code>Flame.audio.play(&#39;sfx/ouch&#39; + (game.rnd.nextInt(11) + 1).toString() + &#39;.ogg&#39;);
</code></pre><p>ä¸º</p>
<pre tabindex="0"><code>if (game.soundButton.isEnabled) {
  Flame.audio.play(&#39;sfx/ouch&#39; + (game.rnd.nextInt(11) + 1).toString() + &#39;.ogg&#39;);
}
</code></pre><p><strong>ğŸ‘‰åœ¨<a href="https://github.com/HarrisonQi/flame-tutorial-langaw/tree/368febc3eeb3adafaf1ff8a5ac400b64ec601f5e" target="_blank">Github</a>
æˆ–<a href="https://github.com/HarrisonQi/flame-tutorial-langaw/tree/368febc3eeb3adafaf1ff8a5ac400b64ec601f5e" target="_blank">ç äº‘</a>
ä¸ŠæŸ¥çœ‹è¿™éƒ¨åˆ†çš„ä»£ç .</strong></p>
<h3 id="æµ‹è¯•æ¸¸æˆ">æµ‹è¯•æ¸¸æˆ!</h3>
<p>å¦‚æœä½ ä¸€ç›´è·Ÿç€æ•™ç¨‹èµ°, é‚£ä¹ˆç°åœ¨åº”è¯¥æœ‰äº†ä¸€ä¸ªè¿™æ ·çš„æ¸¸æˆ:</p>
<h3 id="ç»“è¯­">ç»“è¯­</h3>
<p>æˆ‘ä»¬çš„æ¸¸æˆå·²ç»ç›¸å½“å®Œå–„äº†: æœ‰äº†ç§¯åˆ†ç³»ç»Ÿã€é«˜åˆ†è®°å½•, éŸ³æ•ˆ, BGMå’Œå£°éŸ³æ§åˆ¶æŒ‰é’®.</p>
<p>ä¸‹ä¸€ç« ä¹‹å‰, ç•™ç»™å¤§å®¶ä¸€ä¸ªæŒ‘æˆ˜. è¿™é‡Œæœ‰ä¸€ä¸ªå°åŠŸèƒ½å¤§å®¶å¯ä»¥è‡ªè¡Œç ”ç©¶: æ¯æ¬¡ç©å®¶å¯åŠ¨æ¸¸æˆæ—¶, éŸ³ä¹å’ŒéŸ³æ•ˆæŒ‰é’®éƒ½ä¼šè¢«é‡ç½®ä¸ºå·²å¯åŠ¨, çœ‹çœ‹ä½ èƒ½å¦æŠŠè®¾ç½®çŠ¶æ€å­˜èµ·æ¥!</p>
<p>å¦‚æœä½ å‡ºç°äº†ä¸æ‡‚çš„åœ°æ–¹, ä¸è¦çŠ¹è±«, æ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€! ä¹Ÿæ¬¢è¿åŠ å…¥<a href="https://jq.qq.com/?_wv=1027&amp;k=5ETLFm3" target="_blank">æˆ‘çš„Flameäº¤æµç¾¤(QQ)</a>
, è¿›è¡Œå®æ—¶æ²Ÿé€š.</p>
<h2 id="ä¸‹ä¸€ç« ä¼šå¹²ä»€ä¹ˆ">ä¸‹ä¸€ç« ä¼šå¹²ä»€ä¹ˆ</h2>
<p>å¼ºçƒˆå»ºè®®çœ‹ä¸‹ä¸€ç« å‰, å…ˆæ¥çœ‹ä¸‹<a href="https://jap.alekhin.io/background-music-in-a-flame-game" target="_blank">æ–°çš„èƒŒæ™¯éŸ³ä¹æ•™ç¨‹</a>
</p>
<p>ä¸‹ä¸€ç« å°±æ˜¯ç»ˆç« äº†! æˆ‘ä»¬å°†ä¼šä¿®å¤ä¸€äº›bug, å¹¶å°†æˆ‘ä»¬çš„æ¸¸æˆæ‰“åŒ…, é¢„å¤‡å¥½å‘å¸ƒåˆ°å„å¤§APPå¹³å°ä¸Š!</p>
<h2 id="æ„Ÿè°¢">æ„Ÿè°¢</h2>
<ul>
<li>æœ¬ç¯‡æ–‡ç« å‚è€ƒåŸä½œ<a href="https://jap.alekhin.io/scoring-storage-sound-tutorial-flame-flutter-part-4" target="_blank">ã€ŠScoring, Storage, and Sound Tutorial â€“ Step by Step with Flame and Flutter (Part 4 of 5)ã€‹</a>
.</li>
<li>flameÂ <a href="https://github.com/flame-engine/flame" target="_blank">githubä»“åº“åœ°å€</a>
</li>
<li>pub.devÂ <a href="https://pub.flutter-io.cn/packages/flame" target="_blank">å®˜æ–¹ç½‘å€</a>
</li>
<li><a href="https://github.com/andyli386" target="_blank">andyli386</a>
çš„<a href="https://github.com/HarrisonQi/flame-tutorial-langaw/pull/2" target="_blank">PR</a>
</li>
</ul>


        
      </section>

      

      
    </article>
  </div>

  <div class="hidden lg:flex lg:flex-col lg:items-end">
    
  </div>
</div>


            
<footer class="flex justify-between items-center gap-2 px-4 py-12">

  <div>
  
  <p>Â© 2025 é˜¿èˆªçš„æŠ€æœ¯å°ç«™</p>
  

  
  <p class="text-sm">
    ğŸŒ±
    <span class="text-base-content/60">
      Powered by <a class="hover:underline" href="https://gohugo.io/" target="_blank">Hugo</a> with theme
      <a class="hover:underline" href="https://github.com/g1eny0ung/hugo-theme-dream" target="_blank">Dream</a>.</span
    >
  </p>
  
</div>

  <div
  x-data="{ icons: [
    { name: 'sunny', status: 'n' },
    { name: 'moon', status: 'y' },
    { name: 'desktop', status: 'auto' }
  ] }"
  class="flex items-center gap-2 h-[32px] px-2 bg-base-100 border border-base-content/30 rounded-full"
>
  <template x-for="icon in icons">
    <div
      role="button"
      tabindex="0"
      :aria-label="'Select ' + icon.name + ' mode'"
      class="group inline-flex justify-center items-center p-1 rounded-full cursor-pointer hover:bg-primary"
      :class="$store.darkMode.icon() === icon.name && 'bg-primary'"
      @click="$store.darkMode.toggle(icon.status)"
    >
      <ion-icon
        :name="`${icon.name}-outline`"
        class="group-hover:text-primary-content"
        :class="$store.darkMode.icon() === icon.name && 'text-primary-content'"
      >
      </ion-icon>
    </div>
  </template>
</div>

</footer>

          </div>
        </div>
        <div class="back">
          <div class="container">
            
            <div class="dream-grid dream-grid-about">
  

  

  
</div>

            

            
<footer class="flex justify-between items-center gap-2 px-4 py-12">

  <div>
  
  <p>Â© 2025 é˜¿èˆªçš„æŠ€æœ¯å°ç«™</p>
  

  
  <p class="text-sm">
    ğŸŒ±
    <span class="text-base-content/60">
      Powered by <a class="hover:underline" href="https://gohugo.io/" target="_blank">Hugo</a> with theme
      <a class="hover:underline" href="https://github.com/g1eny0ung/hugo-theme-dream" target="_blank">Dream</a>.</span
    >
  </p>
  
</div>

  <div
  x-data="{ icons: [
    { name: 'sunny', status: 'n' },
    { name: 'moon', status: 'y' },
    { name: 'desktop', status: 'auto' }
  ] }"
  class="flex items-center gap-2 h-[32px] px-2 bg-base-100 border border-base-content/30 rounded-full"
>
  <template x-for="icon in icons">
    <div
      role="button"
      tabindex="0"
      :aria-label="'Select ' + icon.name + ' mode'"
      class="group inline-flex justify-center items-center p-1 rounded-full cursor-pointer hover:bg-primary"
      :class="$store.darkMode.icon() === icon.name && 'bg-primary'"
      @click="$store.darkMode.toggle(icon.status)"
    >
      <ion-icon
        :name="`${icon.name}-outline`"
        class="group-hover:text-primary-content"
        :class="$store.darkMode.icon() === icon.name && 'text-primary-content'"
      >
      </ion-icon>
    </div>
  </template>
</div>

</footer>

          </div>
        </div>
      </div>
    </div>

    <script>
  window.lightTheme =  null 
  window.darkTheme =  null 
</script>


  <script src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script>

  
  
  <script src="/js/grid.js"></script>




<script src="/js/main.js"></script>

    









    

    

    

    

    <script type="module" src="https://unpkg.com/ionicons@7.4.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.4.0/dist/ionicons/ionicons.js"></script>
  </body>
</html>
