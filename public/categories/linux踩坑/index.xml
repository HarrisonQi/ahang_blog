<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Linux踩坑 on 阿航的技术小站</title>
    <link>http://localhost:1313/categories/linux%E8%B8%A9%E5%9D%91/</link>
    <description>Recent content in Linux踩坑 on 阿航的技术小站</description>
    <generator>Hugo</generator>
    <language>zh-CN</language>
    <lastBuildDate>Tue, 22 Jun 2021 00:00:00 +0000</lastBuildDate>
    <atom:link href="http://localhost:1313/categories/linux%E8%B8%A9%E5%9D%91/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Linux 出现 too many open files 的处理办法</title>
      <link>http://localhost:1313/posts/post/2021/linux-%E5%87%BA%E7%8E%B0-too-many-open-files-%E7%9A%84%E5%A4%84%E7%90%86%E5%8A%9E%E6%B3%95/</link>
      <pubDate>Tue, 22 Jun 2021 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/posts/post/2021/linux-%E5%87%BA%E7%8E%B0-too-many-open-files-%E7%9A%84%E5%A4%84%E7%90%86%E5%8A%9E%E6%B3%95/</guid>
      <description>&lt;p&gt;今天在使用Hexo generate时出现了&lt;code&gt;oo many open files&lt;/code&gt;这个问题, 在此记录下过程以及解决方案.&lt;/p&gt;&#xA;&lt;h2 id=&#34;环境&#34;&gt;环境&lt;/h2&gt;&#xA;&lt;p&gt;CentOS&lt;/p&gt;&#xA;&lt;h2 id=&#34;排查步骤&#34;&gt;排查步骤&lt;/h2&gt;&#xA;&lt;p&gt;使用此命令获取当前系统打开文件数量:&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;`lsof | wc -l`&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;使用此命令获取打开文件数量上限:&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;`ulimit -a`&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;会返回类似:&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;`ulimit -a core file size          (blocks, -c) 0 data seg size           (kbytes, -d) unlimited scheduling priority             (-e) 0 file size               (blocks, -f) unlimited pending signals                 (-i) 7268 max locked memory       (kbytes, -l) 64 max memory size         (kbytes, -m) unlimited open files                      (-n) 1024 pipe size            (512 bytes, -p) 8 POSIX message queues     (bytes, -q) 819200 real-time priority              (-r) 0 stack size              (kbytes, -s) 8192 cpu time               (seconds, -t) unlimited max user processes              (-u) 7268 virtual memory          (kbytes, -v) unlimited file locks                      (-x) unlimited`&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;其中, &lt;code&gt;open files&lt;/code&gt;的值就为上限. 上方的例子为 1024.&lt;/p&gt;</description>
    </item>
    <item>
      <title>CentOS 7 安装 PHP 7.2</title>
      <link>http://localhost:1313/posts/post/2020/centos-7-%E5%AE%89%E8%A3%85-php-7-2/</link>
      <pubDate>Thu, 30 Apr 2020 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/posts/post/2020/centos-7-%E5%AE%89%E8%A3%85-php-7-2/</guid>
      <description>&lt;p&gt;CentOS 7 自带的PHP版本比较低, 所以本篇来为大家记录CentOS 7 安装 PHP 7.2 的过程&lt;/p&gt;&#xA;&lt;h2 id=&#34;查看当前安装的php版本&#34;&gt;查看当前安装的PHP版本&lt;/h2&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;php -v&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;如果不是你想要的版本, 请继续向下看.&lt;/p&gt;&#xA;&lt;h2 id=&#34;完全清除旧php&#34;&gt;完全清除旧PHP&lt;/h2&gt;&#xA;&lt;p&gt;输入下面的命令, 来查看已安装的PHP相关包:&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;rpm -qa|grep php&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;正常情况下, 会看到若干行.&lt;/p&gt;&#xA;&lt;p&gt;使用传统的&lt;code&gt;yum remove php&lt;/code&gt;无法清理干净, 所以为了节省时间我们有两种方式:&lt;/p&gt;&#xA;&lt;h3 id=&#34;方法一-优雅删除&#34;&gt;方法一: 优雅删除&lt;/h3&gt;&#xA;&lt;p&gt;因为PHP直接有着相互依赖的关系, 在使用&lt;code&gt;rpm -e XXXX&lt;/code&gt;时会提醒你依赖的包, 这时我们先要删除依赖.&lt;/p&gt;&#xA;&lt;p&gt;当然, 这么做比较浪费时间, 但也是最安全的做法.&lt;/p&gt;&#xA;&lt;h3 id=&#34;方法二-强制批量删除&#34;&gt;方法二: 强制批量删除&lt;/h3&gt;&#xA;&lt;p&gt;使用&lt;code&gt;rpm -e XXXX --nodeps&lt;/code&gt;进行强制删除, 比如:&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;rpm -e php-symfony-http-foundation-2.8.12-2.el7.noarch  --nodeps; \&#xA;rpm -e php-symfony-http-foundation-2.8.12-2.el7.noarch  --nodeps; \&#xA;rpm -e php-composer-spdx-licenses-1.5.3-1.el7.noarch  --nodeps; &#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&#xA;&#xA;  &lt;blockquote&gt;&#xA;    &lt;p&gt;这个例子就会强制删除这三个包, 方便快捷.&lt;/p&gt;&#xA;  &lt;/blockquote&gt;&#xA;&#xA;&lt;h2 id=&#34;检测是否清理干净&#34;&gt;检测是否清理干净&lt;/h2&gt;&#xA;&lt;p&gt;先来看看有没有相关的包:&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;rpm -qa|grep php&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;如果没有返回, 那么视为成功;&lt;/p&gt;&#xA;&lt;p&gt;再来看看PHP是否消失:&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;php -v&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;同样的, 如果没有返回, 那么视为成功.&lt;/p&gt;&#xA;&lt;h2 id=&#34;安装php72&#34;&gt;安装PHP7.2&lt;/h2&gt;&#xA;&lt;p&gt;输入以下命令进行安装:&lt;/p&gt;</description>
    </item>
    <item>
      <title>Linux 踩坑: nohup: redirecting stderr to stdout</title>
      <link>http://localhost:1313/posts/post/2020/nohup-redirecting-stderr-to-stdout/</link>
      <pubDate>Tue, 28 Apr 2020 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/posts/post/2020/nohup-redirecting-stderr-to-stdout/</guid>
      <description>&lt;h2 id=&#34;背景&#34;&gt;背景&lt;/h2&gt;&#xA;&lt;p&gt;为公司部署某CRM系统. 前几步还是比较顺畅的. 但是当我打完包, 把其上传至服务器后, 出现了这样的坑. 阿航在此记录一下, 希望能帮到你&lt;/p&gt;&#xA;&lt;p&gt;运行其提供的&lt;code&gt;.sh&lt;/code&gt;文件时, 报错:&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;nohup: redirecting stderr to stdout&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;找到&lt;code&gt;.sh&lt;/code&gt;文件, 看到这一行:&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;images/01-4.png&#34; alt=&#34;Linux 踩坑: nohup: redirecting stderr to stdout&#34;&gt;&lt;/p&gt;&#xA;&lt;h2 id=&#34;解决方案&#34;&gt;解决方案&lt;/h2&gt;&#xA;&lt;p&gt;我将其末尾的 &lt;code&gt;%&lt;/code&gt; 改为了 &lt;code&gt;2&amp;gt;&amp;amp;1 &amp;amp;&lt;/code&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;images/02-5.png&#34; alt=&#34;Linux 踩坑: nohup: redirecting stderr to stdout&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;再次运行, 成功😏😏.&lt;/p&gt;&#xA;&lt;h2 id=&#34;结语&#34;&gt;结语&lt;/h2&gt;&#xA;&lt;p&gt;本篇文章只记录了阿航踩坑的过程, 不保证适用于全部情况. 很多时候的坑的原因是各种各样的. 希望这篇文章能帮到你.&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://www.runoob.com/linux/linux-tutorial.html&#34; target=&#34;_blank&#34;&gt;Linux菜鸟教程&lt;/a&gt;&#xA;&lt;/p&gt;</description>
    </item>
    <item>
      <title>新安装的 Centos 7.6 mini 网络无法使用</title>
      <link>http://localhost:1313/posts/post/2020/%E6%96%B0%E5%AE%89%E8%A3%85%E7%9A%84-centos-7-6-mini-%E7%BD%91%E7%BB%9C%E6%97%A0%E6%B3%95%E4%BD%BF%E7%94%A8/</link>
      <pubDate>Mon, 27 Apr 2020 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/posts/post/2020/%E6%96%B0%E5%AE%89%E8%A3%85%E7%9A%84-centos-7-6-mini-%E7%BD%91%E7%BB%9C%E6%97%A0%E6%B3%95%E4%BD%BF%E7%94%A8/</guid>
      <description>&lt;p&gt;阿航在给公司部署本地服务器的时候碰到了这个问题, 新安装的 Centos 7.6 mini 网络无法使用. 所以在此记录踩坑历程.&lt;/p&gt;&#xA;&lt;h2 id=&#34;解决方案&#34;&gt;解决方案&lt;/h2&gt;&#xA;&lt;h3 id=&#34;方法一-选择完整安装推荐&#34;&gt;方法一: 选择完整安装(推荐)&lt;/h3&gt;&#xA;&lt;p&gt;这个年代, 硬件设备的价格并不高. 所以服务器的配置不会太低. 所以尽量安装完整版. 选择最小安装会遇到源源不断的坑, 浪费生命😑😑&lt;/p&gt;&#xA;&lt;p&gt;如果条件不允许, 请看方法二↓.&lt;/p&gt;&#xA;&lt;h3 id=&#34;方法二-配置网络&#34;&gt;方法二: 配置网络&lt;/h3&gt;&#xA;&lt;p&gt;1. 找到 /etc/sysconfig/network-scripts&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;cd /etc/sysconfig/network-scripts&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;2. 编辑ifcfg-enXXX&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;vi ifcfg-enp1s0&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;3. 按 i 进入编辑模式, 修改:&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;ONBOOT=yes&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;4. 按ESC键, 输入&lt;code&gt;:wq&lt;/code&gt;保存&lt;/p&gt;&#xA;&lt;p&gt;5. 重启网络服务&lt;/p&gt;&#xA;&lt;h2 id=&#34;参考资料&#34;&gt;参考资料&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://www.centos.org/&#34; target=&#34;_blank&#34;&gt;CentOS官网&lt;/a&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
  </channel>
</rss>
