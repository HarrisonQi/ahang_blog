<!DOCTYPE html>
<html lang="zh-CN"
  x-data
  :class="$store.darkMode.class()"
  :data-theme="$store.darkMode.theme()">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mysql | 阿航的技术小站</title>

    

<link rel="canonical" href="http://localhost:1313/categories/mysql/" />



<meta name="author" content="" />
<meta name="description" content="" />



<meta name="generator" content="Hugo 0.145.0">


<meta property="og:url" content="http://localhost:1313/categories/mysql/">
  <meta property="og:site_name" content="阿航的技术小站">
  <meta property="og:title" content="Mysql">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="website">




  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Mysql">




<link rel="stylesheet" href="/css/output.css" />




     

    

    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  </head>

  <body x-data="{
    flip: false,
  }">
    
    <div id="dream-global-bg"></div>

    
<nav class="mt-4 lg:mt-8 py-4">

  
  <div class="container flex justify-between px-4">
  
    <section class="flex items-center gap-4">
      <div class="avatar cursor-pointer hover:online" @click="flip = !flip" title="Flip it!">
        <div class="h-10 rounded-full">
          <img src="/" alt="" />
        </div>
      </div>

      
    </section>

    <div class="dropdown dropdown-end sm:hidden">
      <div tabindex="0" role="button" class="btn btn-ghost btn-square" aria-label="Select an option">
        <ion-icon name="menu" class="text-2xl"></ion-icon>
      </div>
      <ul tabindex="0" class="dropdown-content menu w-36 bg-base-100 rounded-box z-[1] shadow-md">
        

















<li>
  <a class="inline-flex items-center p-2 cursor-pointer" href="/posts" title="Archives">
    <ion-icon name="archive"></ion-icon>
    Archives
  </a>
</li>




<li>
  <a class="inline-flex items-center p-2 cursor-pointer" href="/categories" title="All Categories">
    <ion-icon name="grid"></ion-icon>
    All Categories
  </a>
</li>




<li>
  <a class="inline-flex items-center p-2 cursor-pointer" href="/tags" title="All Tags">
    <ion-icon name="pricetags"></ion-icon>
    All Tags
  </a>
</li>






      </ul>
    </div>
    <section class="hidden sm:flex sm:items-center sm:gap-2 md:gap-4">
      
      

      

      
      





      
      





      
      





      
      
<a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="/posts" title="Archives">
  <ion-icon class="group-hover:text-primary-content" name="archive"></ion-icon>
</a>


      
      
<a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="/categories" title="All Categories">
  <ion-icon class="group-hover:text-primary-content" name="grid"></ion-icon>
</a>


      
      
<a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="/tags" title="All Tags">
  <ion-icon class="group-hover:text-primary-content" name="pricetags"></ion-icon>
</a>


      

      

      
    </section>
  </div>
</nav>


    <div class="flip-container" :class="{ 'flip-it': flip }">
      <div class="flipper">
        <div class="front">
          <div class="container">
            


<div class="flex flex-col md:flex-row mt-4">

  <div class="md:basis-[200px] lg:basis-[300px] p-4 prose dark:prose-invert">
    <h1 class="text-2xl">Mysql</h1>
    <p class="text-sm">7 articles</p>
    <div class="flex flex-wrap gap-4 mt-6">
      

      
      
      <a href="/categories/collection-box/" class="badge h-6 no-underline hover:badge-primary">
        Collection-Box
      </a>
      
      
      
      <a href="/categories/dart%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7/" class="badge h-6 no-underline hover:badge-primary">
        Dart高级特性
      </a>
      
      
      
      <a href="/categories/ditto/" class="badge h-6 no-underline hover:badge-primary">
        Ditto
      </a>
      
      
      
      <a href="/categories/docker/" class="badge h-6 no-underline hover:badge-primary">
        Docker
      </a>
      
      
      
      <a href="/categories/flame-tutorials/" class="badge h-6 no-underline hover:badge-primary">
        Flame-Tutorials
      </a>
      
      
      
      <a href="/categories/flutter/" class="badge h-6 no-underline hover:badge-primary">
        Flutter
      </a>
      
      
      
      <a href="/categories/flutter-actual-combat/" class="badge h-6 no-underline hover:badge-primary">
        Flutter-Actual-Combat
      </a>
      
      
      
      <a href="/categories/flutter%E6%96%B0%E9%97%BB/" class="badge h-6 no-underline hover:badge-primary">
        Flutter新闻
      </a>
      
      
      
      <a href="/categories/flutter%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/" class="badge h-6 no-underline hover:badge-primary">
        Flutter游戏开发
      </a>
      
      
      
      <a href="/categories/flutter%E8%B8%A9%E5%9D%91/" class="badge h-6 no-underline hover:badge-primary">
        Flutter踩坑
      </a>
      
      
      
      <a href="/categories/git/" class="badge h-6 no-underline hover:badge-primary">
        Git
      </a>
      
      
      
      <a href="/categories/github/" class="badge h-6 no-underline hover:badge-primary">
        Github
      </a>
      
      
      
      <a href="/categories/ide/" class="badge h-6 no-underline hover:badge-primary">
        Ide
      </a>
      
      
      
      <a href="/categories/java/" class="badge h-6 no-underline hover:badge-primary">
        Java
      </a>
      
      
      
      <a href="/categories/java-kotlin%E8%B8%A9%E5%9D%91/" class="badge h-6 no-underline hover:badge-primary">
        Java-Kotlin踩坑
      </a>
      
      
      
      <a href="/categories/java%E6%A1%86%E6%9E%B6/" class="badge h-6 no-underline hover:badge-primary">
        Java框架
      </a>
      
      
      
      <a href="/categories/linux/" class="badge h-6 no-underline hover:badge-primary">
        Linux
      </a>
      
      
      
      <a href="/categories/linux%E4%BC%98%E5%8C%96/" class="badge h-6 no-underline hover:badge-primary">
        Linux优化
      </a>
      
      
      
      <a href="/categories/linux%E8%B8%A9%E5%9D%91/" class="badge h-6 no-underline hover:badge-primary">
        Linux踩坑
      </a>
      
      
      
      <a href="/categories/mac/" class="badge h-6 no-underline hover:badge-primary">
        Mac
      </a>
      
      
      
      <a href="/categories/mybatis-plus/" class="badge h-6 no-underline hover:badge-primary">
        Mybatis-Plus
      </a>
      
      
      
      <span class="badge h-6 badge-primary">
        Mysql
      </span>
      
      
      
      <a href="/categories/nginx/" class="badge h-6 no-underline hover:badge-primary">
        Nginx
      </a>
      
      
      
      <a href="/categories/windows/" class="badge h-6 no-underline hover:badge-primary">
        Windows
      </a>
      
      
      
      <a href="/categories/windows%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2/" class="badge h-6 no-underline hover:badge-primary">
        Windows环境部署
      </a>
      
      
      
      <a href="/categories/wordpress/" class="badge h-6 no-underline hover:badge-primary">
        Wordpress
      </a>
      
      
      
      <a href="/categories/%E6%95%88%E7%8E%87/" class="badge h-6 no-underline hover:badge-primary">
        效率
      </a>
      
      
      
      <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" class="badge h-6 no-underline hover:badge-primary">
        数据库
      </a>
      
      
      
      <a href="/categories/%E6%9E%81%E5%AE%A2%E7%94%A8%E8%AF%AD/" class="badge h-6 no-underline hover:badge-primary">
        极客用语
      </a>
      
      
      
      <a href="/categories/%E8%BF%90%E7%BB%B4/" class="badge h-6 no-underline hover:badge-primary">
        运维
      </a>
      
      
      
      <a href="/categories/%E9%9A%8F%E6%89%8B%E5%86%99/" class="badge h-6 no-underline hover:badge-primary">
        随手写
      </a>
      
      
    </div>
  </div>
  
  <div class="divider divider-vertical md:divider-horizontal px-4 md:px-0"></div>
  
  <div class="flex-1">
    

    
      <div class="dream-grid">
        
          <div class="w-full md:w-1/2 lg:w-1/3 p-4 dream-column">
            <a class="card card-compact bg-base-100 hover:bg-base-content/10 shadow-xl cursor-pointer dark:border dark:border-base-content/30" href="/posts/post/2020/mysql%E6%95%99%E7%A8%8B-01-%E4%BB%80%E4%B9%88%E6%98%AFmysql/">
  
  <figure>
    
    
    <picture>
      <source srcset="/images/default3_hu_599e07ea93afc07d.webp" type="image/webp" />
      <img src="/images/default3.jpg" alt="/images/default3.jpg" />
    </picture>
    
  </figure>
  

  <div class="card-body">
    <h2 class="card-title">MySQL教程 01 什么是MySQL</h2>

    <p class="date text-base-content/60">
    
      Saturday, Oct 24, 2020
    
    </p>

    <!-- raw HTML omitted -->
<p><a href="https://www.bilibili.com/video/BV1eT4y1F7cp/" target="_blank">点击进入bilibili查看高清教程</a>
</p>

    
    <div class="card-actions justify-between items-center mt-4">
      

      <div class="flex items-center">
        <ion-icon name="time" class="mr-1"></ion-icon>
        <span>1 minute read</span>
      </div>
    </div>
  </div>
</a>

          </div>
        
          <div class="w-full md:w-1/2 lg:w-1/3 p-4 dream-column">
            <a class="card card-compact bg-base-100 hover:bg-base-content/10 shadow-xl cursor-pointer dark:border dark:border-base-content/30" href="/posts/post/2020/mysql%E6%A0%B9%E6%8D%AE%E7%94%9F%E6%97%A5%E8%AE%A1%E7%AE%97%E5%B9%B4%E9%BE%84/">
  
  <figure>
    
    
    <picture>
      <source srcset="/images/default1_hu_33478ca164b4fce4.webp" type="image/webp" />
      <img src="/images/default1.jpg" alt="/images/default1.jpg" />
    </picture>
    
  </figure>
  

  <div class="card-body">
    <h2 class="card-title">MySql根据生日计算年龄</h2>

    <p class="date text-base-content/60">
    
      Saturday, Oct 24, 2020
    
    </p>

    <p>这次的需求是需要通过出生日期（年月日）来计算年龄。一句SQL就可以搞定:</p>
<pre><code>`SELECT TIMESTAMPDIFF(YEAR, '2000-01-01', CURDATE());`
</code></pre>
<p>如果格式是 年-月-日 ，那就使用<code>CONCAT</code>拼接起来，这么写：</p>
<pre><code>`SELECT TIMESTAMPDIFF(YEAR, CONCAT(2000, '-', 1, '-', 1), CURDATE());`
</code></pre>
<p>如果你遇到了更好的解法，欢迎在下方留言哟！</p>

    
    <div class="card-actions justify-between items-center mt-4">
      

      <div class="flex items-center">
        <ion-icon name="time" class="mr-1"></ion-icon>
        <span>1 minute read</span>
      </div>
    </div>
  </div>
</a>

          </div>
        
          <div class="w-full md:w-1/2 lg:w-1/3 p-4 dream-column">
            <a class="card card-compact bg-base-100 hover:bg-base-content/10 shadow-xl cursor-pointer dark:border dark:border-base-content/30" href="/posts/post/2020/access-denied-for-user/">
  
  <figure>
    
    
    <picture>
      <source srcset="/images/default4_hu_ae815e0f1649c253.webp" type="image/webp" />
      <img src="/images/default4.jpg" alt="/images/default4.jpg" />
    </picture>
    
  </figure>
  

  <div class="card-body">
    <h2 class="card-title">Access denied for user</h2>

    <p class="date text-base-content/60">
    
      Monday, Aug 3, 2020
    
    </p>

    <p>在开发的过程中坎坷不断。今天在Spring Boot中碰到了这个异常：</p>
<pre><code>`Caused by: com.mysql.cj.exceptions.CJException: Access denied for user 'root'@'localhost' (using password: YES)`
</code></pre>
<p>本篇文章就来记录下可能的情况以及解决方案。</p>
<h2 id="问题原因">问题原因</h2>
<p>问题的根源就在数据库登陆上。肯定是账号和密码有误，所以我们要仔细检查配置文件，有以下几个地方容易出错：</p>
<h3 id="情况一检查配置文件是否包含空格">情况一：检查配置文件是否包含空格</h3>
<p>因为application.yml似乎并不会给我们的配置文件进行去空格处理，所以我们来仔细检查。配置文件人模人样的，看起来没啥问题：</p>
<p><img src="images/Access-denied-for-user-01.png" alt=""></p>
<p>结果一选中：</p>
<p><img src="images/Access-denied-for-user-02.png" alt=""></p>
<p>呵！其实不然。所以一定要<strong>去除多余的空格</strong>！</p>
<h3 id="情况二检查username和password值是否写反">情况二：检查username和password值是否写反</h3>
<p>因为26个字母中<code>u</code>在<code>p</code>的后面，所以默认的yml排序中<code>username</code>会在<code>password</code>下面。阿航就是踩了这个坑！以为用户名在上方，导致写反！</p>
<h3 id="情况三检查ip是否正确">情况三：检查IP是否正确</h3>
<p>如果确定账户密码正确，我们就来看看IP是否有误吧。</p>
<p>在数据库中输入以下SQL进行查询（这里以MySQL为例）：</p>
<pre><code>` SELECT 	CONCAT( USER, '@', HOST ) Result FROM 	mysql.USER;`
</code></pre>
<p>查看返回结果是否包含你的报错。如果不包含就说明你的IP未被创建。</p>
<h3 id="情况四检查数据库服务器配置">情况四：检查数据库服务器配置</h3>
<p>使用其他的软件连接你的数据库（如Navicat），使用相同的用户名和密码看看能否登陆。如果不能登陆则是数据库层的问题，与代码无关了。</p>
<h2 id="结语">结语</h2>
<p>总之，解决方案就是细心。。</p>

    
    <div class="card-actions justify-between items-center mt-4">
      

      <div class="flex items-center">
        <ion-icon name="time" class="mr-1"></ion-icon>
        <span>1 minute read</span>
      </div>
    </div>
  </div>
</a>

          </div>
        
          <div class="w-full md:w-1/2 lg:w-1/3 p-4 dream-column">
            <a class="card card-compact bg-base-100 hover:bg-base-content/10 shadow-xl cursor-pointer dark:border dark:border-base-content/30" href="/posts/post/2020/mysql%E5%A4%9A%E6%9D%A1%E8%AE%B0%E5%BD%95-%E7%BB%93%E6%9E%9C%E5%90%88%E5%B9%B6%E4%B8%BA%E4%B8%80%E8%A1%8C%E5%B9%B6%E8%BD%AC%E6%8D%A2%E4%B8%BAjson/">
  
  <figure>
    
    
    <picture>
      <source srcset="/images/default1_hu_33478ca164b4fce4.webp" type="image/webp" />
      <img src="/images/default1.jpg" alt="/images/default1.jpg" />
    </picture>
    
  </figure>
  

  <div class="card-body">
    <h2 class="card-title">MySQL多条记录/结果合并为一行,并转换为JSON</h2>

    <p class="date text-base-content/60">
    
      Tuesday, Jul 14, 2020
    
    </p>

    <p>我们在使用MySQL进行查询时, 我们希望把同类结果合并为一行(1个字段内). 本篇文章就来记录下如何使用MySQL将多条记录/结果合并为一行.</p>
<h2 id="效果">效果</h2>
<p>有图有真相, 先来看下查询的最终效果对比:</p>
<!-- raw HTML omitted -->
<p><img src="images/MySQL%E5%A4%9A%E6%9D%A1%E8%AE%B0%E5%BD%95%E7%BB%93%E6%9E%9C%E5%90%88%E5%B9%B6-01.png" alt=""></p>
<!-- raw HTML omitted -->
<p>合并前</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p><img src="images/MySQL%E5%A4%9A%E6%9D%A1%E8%AE%B0%E5%BD%95%E7%BB%93%E6%9E%9C%E5%90%88%E5%B9%B6-03.png" alt=""></p>
<!-- raw HTML omitted -->
<p><img src="images/MySQL%E5%A4%9A%E6%9D%A1%E8%AE%B0%E5%BD%95%E7%BB%93%E6%9E%9C%E5%90%88%E5%B9%B6-02.png" alt=""></p>
<!-- raw HTML omitted -->
<p>合并后</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<h2 id="实战开始">实战开始</h2>
<h3 id="创建表及填充数据">创建表及填充数据</h3>
<p>先来创建一个表. 在库中运行以下SQL命令:</p>
<pre><code>``DROP TABLE IF EXISTS `t_name`; CREATE TABLE `t_name`  (   `name` varchar(255) NOT NULL,   PRIMARY KEY (`name`) ) ; INSERT INTO `t_name` VALUES ('阿航'),('张三'),('李四'),('王五'),('傻根');``
</code></pre>
<p>至此, 我们有了一个<code>t_name</code>表了. 这个表用于存储名字.</p>

    
    <div class="card-actions justify-between items-center mt-4">
      

      <div class="flex items-center">
        <ion-icon name="time" class="mr-1"></ion-icon>
        <span>1 minute read</span>
      </div>
    </div>
  </div>
</a>

          </div>
        
          <div class="w-full md:w-1/2 lg:w-1/3 p-4 dream-column">
            <a class="card card-compact bg-base-100 hover:bg-base-content/10 shadow-xl cursor-pointer dark:border dark:border-base-content/30" href="/posts/post/2020/%E4%BF%AE%E6%94%B9docker-%E7%9A%84-mysql-%E5%AE%B9%E5%99%A8%E6%97%B6%E5%8C%BA/">
  
  <figure>
    
    
    <picture>
      <source srcset="/images/default2_hu_c96b8a8cc3f55f81.webp" type="image/webp" />
      <img src="/images/default2.jpg" alt="/images/default2.jpg" />
    </picture>
    
  </figure>
  

  <div class="card-body">
    <h2 class="card-title">修改Docker 的 MySQL 容器时区</h2>

    <p class="date text-base-content/60">
    
      Sunday, Jul 12, 2020
    
    </p>

    <p>阿航在开发Springboot项目时, 前端告诉验证码一直无效. 本地测试没有问题, 一看远程服务器的数据库时间, 哇塞&ndash;早了8小时. 很明显, 是MySQL的时区问题. 本篇文章就来记录下如何修改Docker 的 MySQL 容器时区.</p>
<h2 id="解决方案">解决方案</h2>
<p>先来校验下数据库是否真的时区不对. 进入MySQL数据库, 运行语句:</p>
<pre><code>`SELECT NOW();`
</code></pre>
<p>会返回类似这样的数据:</p>
<pre><code>`mysql&gt; SELECT NOW(); +---------------------+ | NOW()               | +---------------------+ | 2020-07-04 15:46:46 | +---------------------+ 1 row in set (0.09 sec)`
</code></pre>
<p>再来查询下当前时区, 输入以下命令:</p>
<pre><code>`SHOW VARIABLES LIKE '%time_zone%';`
</code></pre>
<p>会返回类似这样的数据:</p>
<pre><code>`mysql&gt; SHOW VARIABLES LIKE '%time_zone%'; +------------------+--------+ | Variable_name    | Value  | +------------------+--------+ | system_time_zone | UTC    | | time_zone        | +00:00 | +------------------+--------+ 2 rows in set (0.12 sec)`
</code></pre>
<p>如果返回的时间和你的相差多个小时, 并且时区不对(非+08:00)的话, 那么证明你需要向下看了.</p>

    
    <div class="card-actions justify-between items-center mt-4">
      

      <div class="flex items-center">
        <ion-icon name="time" class="mr-1"></ion-icon>
        <span>1 minute read</span>
      </div>
    </div>
  </div>
</a>

          </div>
        
          <div class="w-full md:w-1/2 lg:w-1/3 p-4 dream-column">
            <a class="card card-compact bg-base-100 hover:bg-base-content/10 shadow-xl cursor-pointer dark:border dark:border-base-content/30" href="/posts/post/2020/mysql-join-min-max/">
  
  <figure>
    
    
    <picture>
      <source srcset="/images/default4_hu_ae815e0f1649c253.webp" type="image/webp" />
      <img src="/images/default4.jpg" alt="/images/default4.jpg" />
    </picture>
    
  </figure>
  

  <div class="card-body">
    <h2 class="card-title">MySQL JOIN MIN()/MAX() 组合使用</h2>

    <p class="date text-base-content/60">
    
      Tuesday, Jun 9, 2020
    
    </p>

    <p>这次阿航在开发后端接口, 写复杂SQL查询时碰到了这个问题, 我需要将MySQL的<code>JOIN</code>关键字和<code>MIN()</code>同时使用. 本篇文章就来记录下<code>MySQL</code> <code>JOIN</code> <code>MIN()/MAX()</code>的组合使用.</p>
<h2 id="应用场景">应用场景</h2>
<p>大家都有过淘宝网购的经历, 应该记得在搜索时, 出来的结果列表都是每个产品的最小价格. 点进去后, 选择不同的型号会有相应的价格.</p>
<p>阿航碰到的是我有两个表, 一个是SPU(产品表), 一个是SKU(商品表), 它们是一对多的关系(因为一款产品会有多个型号). 我需要在查询SPU的同时, 再把对应的最便宜的SKU的价格进行返回.</p>
<p>总结: <strong>一对多关联查询, 并且把多的表的最大/最小值返回.</strong></p>
<h2 id="实战开始">实战开始</h2>
<p>[epcl_box type=&ldquo;information&rdquo;]为了方便大家理解, 阿航在这里进行相应的简化[/epcl_box]</p>
<h3 id="数据关系">数据关系</h3>
<p>先来看下两个表的关系:</p>
<p><img src="images/MySQL-JOIN-MINMAX-01.png" alt=""></p>



  <blockquote>
    <p>其中, 一个SPU对应多个SKU ( 比如一件衣服有多个颜色 ).</p>
<p>💡 解析</p>
  </blockquote>

<h3 id="初始化数据库">初始化数据库</h3>
<p>进入数据库, 运行以下SQL语句定义并初始化数据表:</p>
<pre tabindex="0"><code>CREATE DATABASE mysql_join_demo DEFAULT CHARACTER 
SET = &#39;utf8mb4&#39;;

USE mysql_join_demo;

CREATE TABLE t_spu(
    id BIGINT NOT NULL AUTO_INCREMENT COMMENT &#39;主键&#39;,
    name VARCHAR(32) NOT NULL COMMENT &#39;产品名&#39;,
    PRIMARY KEY (id)
) COMMENT = &#39;产品SPU表&#39;;

CREATE TABLE t_sku(
    id BIGINT NOT NULL AUTO_INCREMENT COMMENT &#39;主键&#39;,
    spu_id BIGINT NOT NULL COMMENT &#39;产品ID&#39;,
    spec VARCHAR(32) NOT NULL COMMENT &#39;型号&#39;,
    price BIGINT NOT NULL COMMENT &#39;价格&#39;,
    PRIMARY KEY (id)
) COMMENT = &#39;商品表&#39;;

INSERT INTO `mysql_join_demo`.`t_spu`(`id`, `name`) VALUES (1, &#39;联想电脑&#39;);
INSERT INTO `mysql_join_demo`.`t_sku`(`id`, `spu_id`, `spec`, `price`) VALUES (1, 1, &#39;低配版&#39;, 5000);
INSERT INTO `mysql_join_demo`.`t_sku`(`id`, `spu_id`, `spec`, `price`) VALUES (2, 1, &#39;高配版&#39;, 8000);
</code></pre><p>运行完成后, 表的数据结构应该为:</p>

    
    <div class="card-actions justify-between items-center mt-4">
      

      <div class="flex items-center">
        <ion-icon name="time" class="mr-1"></ion-icon>
        <span>2 minute read</span>
      </div>
    </div>
  </div>
</a>

          </div>
        
          <div class="w-full md:w-1/2 lg:w-1/3 p-4 dream-column">
            <a class="card card-compact bg-base-100 hover:bg-base-content/10 shadow-xl cursor-pointer dark:border dark:border-base-content/30" href="/posts/post/2020/mysql-%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7-%E6%8E%88%E6%9D%83/">
  
  <figure>
    
    
    <picture>
      <source srcset="/images/default2_hu_c96b8a8cc3f55f81.webp" type="image/webp" />
      <img src="/images/default2.jpg" alt="/images/default2.jpg" />
    </picture>
    
  </figure>
  

  <div class="card-body">
    <h2 class="card-title">MySQL 创建用户 &amp; 授权</h2>

    <p class="date text-base-content/60">
    
      Monday, May 11, 2020
    
    </p>

    <p>MySQL 等主流 数据库 的最高权限一般是root用户. 有时我们需要提供数据库的账号和密码以使用某些服务. 但实际上每个服务只会使用1个左右的数据库. 直接将root账号和密码随意分配是一件很危险的事情. 所以我们需要单独的 创建用户, 并 授权 需要的数据库给它.</p>
<h2 id="用户管理">用户管理</h2>
<h3 id="创建用户">创建用户</h3>
<p>创建用户harrison, 并指定IP为192.118.1.1; 设置密码为123</p>
<pre tabindex="0"><code>CREATE USER &#39;harrison&#39; @&#39;192.118.1.1&#39; IDENTIFIED BY &#39;123&#39;;
</code></pre><p>创建用户harrison, 任意IP即可登录; 设置密码为123</p>
<pre tabindex="0"><code>CREATE USER &#39;harrison&#39; @&#39;%&#39; IDENTIFIED BY &#39;123&#39;;
</code></pre><h3 id="删除用户">删除用户</h3>
<p>删除用户名为harrison, 且IP为192.118.1.1的用户</p>
<pre tabindex="0"><code>DROP USER &#39;harrison&#39; @&#39;192.118.1.1&#39;;
</code></pre><h3 id="修改用户名及ip">修改用户名及IP</h3>
<p>修改用户名为harrison, 不限制登录IP的用户 -&gt; 用户名harry, 限制登录IP为192.168.1.1</p>
<pre tabindex="0"><code>RENAME USER &#39;harrison&#39; @&#39;%&#39; TO &#39;harry&#39; @&#39;192.168.1.1&#39;;
</code></pre><h3 id="修改用户密码">修改用户密码</h3>
<p>修改用户名为harrison, 不限制登录IP的用户的密码为456</p>
<pre tabindex="0"><code>SET PASSWORD FOR &#39;harrison&#39; @&#39;%&#39; = PASSWORD ( &#39;456&#39; );
</code></pre><h2 id="用户授权">用户授权</h2>
<h3 id="查看用户拥有权限">查看用户拥有权限</h3>
<p>查看用户harrison拥有的权限:</p>
<pre tabindex="0"><code>SHOW GRANTS FOR &#39;harrison&#39; @&#39;%&#39;;
</code></pre><h3 id="赋予权限">赋予权限</h3>
<p>为harrison提供db1数据库的table1表SELECT(查询)、INSERT(新增)、UPDATE(修改)权限</p>

    
    <div class="card-actions justify-between items-center mt-4">
      

      <div class="flex items-center">
        <ion-icon name="time" class="mr-1"></ion-icon>
        <span>1 minute read</span>
      </div>
    </div>
  </div>
</a>

          </div>
        
      </div>
    

    
  </div>
</div>



            
<footer class="flex justify-between items-center gap-2 px-4 py-12">

  <div>
  
  <p>© 2025 阿航的技术小站</p>
  

  
  <p class="text-sm">
    🌱
    <span class="text-base-content/60">
      Powered by <a class="hover:underline" href="https://gohugo.io/" target="_blank">Hugo</a> with theme
      <a class="hover:underline" href="https://github.com/g1eny0ung/hugo-theme-dream" target="_blank">Dream</a>.</span
    >
  </p>
  
</div>

  <div
  x-data="{ icons: [
    { name: 'sunny', status: 'n' },
    { name: 'moon', status: 'y' },
    { name: 'desktop', status: 'auto' }
  ] }"
  class="flex items-center gap-2 h-[32px] px-2 bg-base-100 border border-base-content/30 rounded-full"
>
  <template x-for="icon in icons">
    <div
      role="button"
      tabindex="0"
      :aria-label="'Select ' + icon.name + ' mode'"
      class="group inline-flex justify-center items-center p-1 rounded-full cursor-pointer hover:bg-primary"
      :class="$store.darkMode.icon() === icon.name && 'bg-primary'"
      @click="$store.darkMode.toggle(icon.status)"
    >
      <ion-icon
        :name="`${icon.name}-outline`"
        class="group-hover:text-primary-content"
        :class="$store.darkMode.icon() === icon.name && 'text-primary-content'"
      >
      </ion-icon>
    </div>
  </template>
</div>

</footer>

          </div>
        </div>
        <div class="back">
          <div class="container">
            
            <div class="dream-grid dream-grid-about">
  

  

  
</div>

            

            
<footer class="flex justify-between items-center gap-2 px-4 py-12">

  <div>
  
  <p>© 2025 阿航的技术小站</p>
  

  
  <p class="text-sm">
    🌱
    <span class="text-base-content/60">
      Powered by <a class="hover:underline" href="https://gohugo.io/" target="_blank">Hugo</a> with theme
      <a class="hover:underline" href="https://github.com/g1eny0ung/hugo-theme-dream" target="_blank">Dream</a>.</span
    >
  </p>
  
</div>

  <div
  x-data="{ icons: [
    { name: 'sunny', status: 'n' },
    { name: 'moon', status: 'y' },
    { name: 'desktop', status: 'auto' }
  ] }"
  class="flex items-center gap-2 h-[32px] px-2 bg-base-100 border border-base-content/30 rounded-full"
>
  <template x-for="icon in icons">
    <div
      role="button"
      tabindex="0"
      :aria-label="'Select ' + icon.name + ' mode'"
      class="group inline-flex justify-center items-center p-1 rounded-full cursor-pointer hover:bg-primary"
      :class="$store.darkMode.icon() === icon.name && 'bg-primary'"
      @click="$store.darkMode.toggle(icon.status)"
    >
      <ion-icon
        :name="`${icon.name}-outline`"
        class="group-hover:text-primary-content"
        :class="$store.darkMode.icon() === icon.name && 'text-primary-content'"
      >
      </ion-icon>
    </div>
  </template>
</div>

</footer>

          </div>
        </div>
      </div>
    </div>

    <script>
  window.lightTheme =  null 
  window.darkTheme =  null 
</script>


  <script src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script>

  
  
  <script src="/js/grid.js"></script>




<script src="/js/main.js"></script>

    





    

    

    

    

    <script type="module" src="https://unpkg.com/ionicons@7.4.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.4.0/dist/ionicons/ionicons.js"></script>
  </body>
</html>
