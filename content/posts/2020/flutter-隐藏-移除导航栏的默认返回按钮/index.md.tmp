---
title: "Flutter éšè—/ç§»é™¤å¯¼èˆªæ çš„é»˜è®¤è¿”å›æŒ‰é’®"
date: "2020-06-19"
categories: 
  - "flutter"
  - "flutter-actual-combat"
tags: 
  - "flutter"
  - "å¸¸ç”¨æ“ä½œ"
  - "å¸¸ç”¨ç»„ä»¶"
---

åœ¨å®é™…é¡¹ç›®å¼€å‘ä¸­, æˆ‘ä»¬åœ¨è¿›è¡Œé¡µé¢è·³è½¬æ—¶, å¶å°”ä¼šè·³åˆ°ä¸å¯è¿”å›çš„é¡µé¢(æ¯”å¦‚é€€å‡ºç™»å½•å). æœ¬ç¯‡æ–‡ç« å°±æ¥è®°å½•ä¸‹ Flutter å¦‚ä½•éšè—/ç§»é™¤å¯¼èˆªæ çš„é»˜è®¤è¿”å›æŒ‰é’®.

## æ•ˆæœ

æœ‰å›¾æœ‰çœŸç›¸, å…ˆæ¥çœ‹ä¸‹å®é™…æ•ˆæœ:

## åº”ç”¨åœºæ™¯

ç§»é™¤å¯¼èˆªæ çš„é»˜è®¤è¿”å›æŒ‰é’®é€‚ç”¨äº:

- é€€å‡ºç™»å½•åç¦æ­¢è¿”å›
- è·³è½¬è‡³ä¸€ä¸ªå…¨æ–°çš„é¡µé¢, ä¸å¯è¿”å›
- ç¦æ­¢è¿”å›çš„ä»»ä½•é¡µé¢

## éœ€å…·å¤‡çš„æ¡ä»¶

- æŒæ¡FlutteråŸºç¡€
- æŒæ¡Flutteré¡µé¢è·³è½¬çš„åŸºæœ¬æ“ä½œ

æœ¬ç¯‡æ–‡ç« çš„ç¯å¢ƒ:

| ç¯å¢ƒ | ç‰ˆæœ¬ |
| --- | --- |
| Flutter | 1.19.0-2.0.pre |

## å®æˆ˜å¼€å§‹

### å‡†å¤‡å·¥ä½œ

åˆ›å»ºæ–°æ–‡ä»¶`./lib/main.dart`(æˆ–è€…å…¶ä»–ä½ æƒ³è¦çš„æ–‡ä»¶å):

```dart
import 'package:flutter/material.dart';

void main() => runApp(MyApp());

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Remove back button',
      home: FirstPage(),
    );
  }
}

class FirstPage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text("First Page"),
      ),
      body: Center(
        child: RaisedButton(
          child: Text("è·³è½¬åˆ°ä¸‹ä¸€é¡µ"),
          onPressed: () {
            Navigator.push(context, MaterialPageRoute(builder: (context) {
              return SecondPage();
            }));
          },
        ),
      ),
    );
  }
}

class SecondPage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text("Second Page"),
      ),
    );
  }
}
```

ğŸŸ¢ è¿è¡Œ, å¯ä»¥çœ‹åˆ°demoæä¾›äº†æ­£å¸¸è·³è½¬:

![](images/Flutter-ç§»é™¤å¯¼èˆªæ çš„é»˜è®¤è¿”å›æŒ‰é’®-01.gif)

### æ–¹æ³•ä¸€: æ›¿æ¢AppBarçš„leading

æ‰¾åˆ°`SecondPage`, ä¸ºå…¶AppBarä¼ å…¥`leading`:

```dart
appBar: AppBar(
  leading: Container(),
  title: Text("Second Page"),
),
```

<figure>

![](images/Flutter-ç§»é™¤å¯¼èˆªæ çš„é»˜è®¤è¿”å›æŒ‰é’®-02.png)

<figcaption>

ä»£ç æˆªå›¾

</figcaption>

</figure>

> `leading`æ˜¯AppBarçš„ä¸€ä¸ªå¯é€‰å‚æ•°. ä¼ å…¥çš„widgetå°†ç½®äº`title`å‰. æˆ‘ä»¬å·§å¦™çš„ä¼ å…¥äº†ä¸€ä¸ªç©ºçš„Containeræ¥è¾¾åˆ°æ›¿æ¢è¿”å›æŒ‰é’®çš„æ•ˆæœ.
> 
> ğŸ’¡ ä»£ç è§£æ

ğŸŸ¢ è¿è¡Œ, å¯ä»¥çœ‹åˆ°è¿”å›æŒ‰é’®ä¸è§äº†:

![](images/Flutter-ç§»é™¤å¯¼èˆªæ çš„é»˜è®¤è¿”å›æŒ‰é’®-03.gif)

\[epcl\_box type="notice"\]è¿™ç§æ–¹æ³•å­˜åœ¨ä¸¤ä¸ªç¼ºé™·: ç¬¬ä¸€ä¸ªå°±æ˜¯æ ‡é¢˜å‰æ–¹ä¼šæœ‰ç©ºç™½. ç¬¬äºŒä¸ªå°±æ˜¯æŒ‰ç‰©ç†è¿”å›é”®ä»èƒ½è¿”å›è‡³ä¸Šä¸€é¡µ.\[/epcl\_box\]

è™½ç„¶è¿™ç§æ–¹æ³•ä»£ç éå¸¸ç®€æ´, ä½†æ˜¯å¯èƒ½æ— æ³•å®Œå…¨æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚.

### æ–¹æ³•äºŒ: Navigator.pushAndRemoveUntil()

å¦‚æœä½ å°è¯•äº†æ–¹æ³•ä¸€, è¯·å…ˆç§»é™¤æ­¤è¡Œ:

```dart
leading: Container(),
```

æ‰¾åˆ°`FirstPage`, æ›¿æ¢:

```dart
Navigator.push(context, MaterialPageRoute(builder: (context) {
  return SecondPage();
}));
```

ä¸º:

```dart
Navigator.pushAndRemoveUntil(context,
    MaterialPageRoute(builder: (context) {
  return SecondPage();
}), (route) => route == null);
```

<figure>

![](images/Flutter-ç§»é™¤å¯¼èˆªæ çš„é»˜è®¤è¿”å›æŒ‰é’®-04.png)

<figcaption>

ä»£ç æˆªå›¾

</figcaption>

</figure>

> `Navigator._push_()`å’Œ`Navigator._pushAndRemoveUntil_()`çš„ä¸åŒä¹‹å¤„å°±æ˜¯, pushä¼šä¿ç•™ä¹‹å‰çš„é¡µé¢, è€Œ_`pushAndRemoveUntil`_å°†ä¼šç§»é™¤ä¹‹å‰çš„é¡µé¢. ä½¿Flutteræ— æ³•æ‰¾åˆ°ä¹‹å‰çš„é¡µé¢, ä»è€Œè¾¾åˆ°å»é™¤è¿”å›é”®çš„ç›®çš„.
> 
> ğŸ’¡ ä»£ç è§£æ

ğŸŸ¢ è¿è¡Œé¡¹ç›®, å¯ä»¥çœ‹åˆ°å¯¼èˆªæ è¿”å›æŒ‰é’®æ¶ˆå¤±, å¹¶ä¸”æŒ‰ç‰©ç†è¿”å›é”®ä¼šç›´æ¥é€€å‡ºAPP:

![](images/Flutter-ç§»é™¤å¯¼èˆªæ çš„é»˜è®¤è¿”å›æŒ‰é’®-05.gif)

\[epcl\_box type="success"\]æå®šå•¦!\[/epcl\_box\]

## æ„Ÿè°¢

[flutter remove back button on appbar](https://stackoverflow.com/questions/44978216/flutter-remove-back-button-on-appbar) 